<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computer Evolution Comparison</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Courier Prime', monospace;
            background: #001a33;
            min-height: 100vh;
            padding: 30px;
            color: #66ccff;
            line-height: 1.5;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: #002244;
            border: 5px solid #004488;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            color: #66ccff;
            margin-bottom: 5px;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 8px;
            border-top: 2px solid #0066cc;
            border-bottom: 2px solid #0066cc;
            padding: 15px 0;
            background: linear-gradient(180deg, #003366 0%, #002244 100%);
        }

        .subtitle {
            text-align: center;
            color: #4499cc;
            margin-bottom: 30px;
            font-size: 13px;
            letter-spacing: 3px;
            padding: 0 30px;
        }

        .explainer {
            text-align: center;
            margin: 0 30px 30px 30px;
            padding: 15px;
            background: #001a33;
            border: 2px solid #0066cc;
            border-left: 8px solid #0066cc;
            color: #66ccff;
            font-size: 14px;
        }

        .selectors {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 0 30px 25px 30px;
        }

        .selector-group {
            background: #002244;
            padding: 25px;
            border: 3px solid #0066cc;
            border-left: 8px solid #0066cc;
            position: relative;
        }

        .selector-group h3 {
            margin-bottom: 15px;
            color: #99ddff;
            font-size: 14px;
            letter-spacing: 1px;
            font-weight: 700;
        }

        select {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #0066cc;
            font-size: 14px;
            background: #001a33;
            color: #66ccff;
            cursor: pointer;
            font-family: 'Courier Prime', monospace;
            letter-spacing: 1px;
        }

        select:focus {
            outline: none;
            border-color: #66ccff;
            box-shadow: 0 0 10px rgba(102, 204, 255, 0.5);
        }

        .summary-section {
            background: #001a33;
            padding: 20px;
            margin: 0 30px 20px 30px;
            border: 2px solid #0066cc;
            border-bottom: none;
        }

        .summary-title {
            color: #66ccff;
            font-size: 18px;
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
            letter-spacing: 3px;
            border-bottom: 1px solid #0066cc;
            padding-bottom: 10px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0;
        }

        .summary-item {
            background: #001a33;
            padding: 15px;
            text-align: left;
            border-bottom: 1px dotted rgba(102, 204, 255, 0.3);
        }

        .summary-label {
            font-weight: normal;
            color: #4499cc;
            font-size: 13px;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .summary-value {
            color: #66ccff;
            font-size: 16px;
            font-weight: 700;
        }

        .compute-breakdown {
            background: #002244;
            padding: 15px;
            margin-top: 15px;
            border: 2px solid #0066cc;
        }

        .compute-breakdown-title {
            font-weight: bold;
            color: #66ccff;
            margin-bottom: 10px;
            text-align: center;
            font-size: 14px;
            letter-spacing: 2px;
        }

        .compute-formula {
            font-family: 'Courier Prime', monospace;
            background: #001a33;
            padding: 10px;
            text-align: center;
            margin: 5px 0;
            border: 1px solid #0066cc;
            color: #66ccff;
            font-size: 13px;
        }

        .visualizations {
            background: #001a33;
            padding: 20px;
            margin: 0 30px;
            border: 2px solid #0066cc;
            border-bottom: none;
        }

        .vis-title {
            color: #66ccff;
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            letter-spacing: 3px;
            border-bottom: 1px solid #0066cc;
            padding-bottom: 10px;
        }

        .comparison-row {
            margin-bottom: 0;
            padding: 20px;
            background: #002244;
            border: 2px solid #0066cc;
            border-bottom: none;
        }

        .comparison-row:last-child {
            border-bottom: 2px solid #0066cc;
        }

        .comparison-header {
            font-weight: bold;
            color: #66ccff;
            margin-bottom: 15px;
            font-size: 15px;
            text-align: center;
            letter-spacing: 2px;
        }

        .ratio-badge {
            display: inline-block;
            background: #0066cc;
            color: white;
            padding: 5px 12px;
            font-weight: bold;
            margin-bottom: 15px;
            letter-spacing: 1px;
            font-size: 13px;
        }

        /* Simple bar chart for small differences (2-20x) */
        .simple-bars {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 20px;
            height: 100px;
            margin: 20px 0;
        }

        .simple-bar {
            background: linear-gradient(180deg, #0077dd 0%, #0055aa 100%);
            color: white;
            font-weight: bold;
            font-size: 12px;
            min-width: 60px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 8px;
            text-align: center;
            border: 2px solid #0066cc;
        }

        /* Circle comparison for medium differences (20-1000x) */
        .circle-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .circle-item {
            text-align: center;
        }

        .circle {
            background: linear-gradient(135deg, #0066cc, #004488);
            border: 3px solid #0066cc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 0 auto 10px;
            font-size: 11px;
        }

        .circle-label {
            font-size: 12px;
            color: #66ccff;
            font-weight: bold;
        }

        /* Scale representation for huge differences (1000x+) */
        .scale-representation {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #002244;
            border: 2px solid #0066cc;
        }

        .scale-large {
            font-size: 1.5em;
            color: #66ccff;
            font-weight: bold;
            margin: 10px 0;
        }

        .scale-small {
            font-size: 0.8em;
            color: #4499cc;
            margin: 10px 0;
        }

        .metaphor {
            background: #001a33;
            padding: 15px;
            font-style: italic;
            color: #66ccff;
            text-align: center;
            margin-top: 10px;
            border: 1px solid #0066cc;
        }

        .spec-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            margin: 0 30px;
        }

        .spec-card {
            background: #001a33;
            padding: 20px;
            border: 2px solid #0066cc;
            border-bottom: none;
        }

        .spec-card:nth-child(2n) {
            border-left: none;
        }

        .spec-card:last-child,
        .spec-card:nth-last-child(2):nth-child(odd) {
            border-bottom: 2px solid #0066cc;
        }

        .spec-card h3 {
            color: #66ccff;
            margin-bottom: 15px;
            font-size: 16px;
            border-bottom: 1px solid #0066cc;
            padding-bottom: 8px;
            letter-spacing: 2px;
        }

        .spec-row {
            display: grid;
            grid-template-columns: 250px auto;
            margin-bottom: 0;
            padding: 8px 0;
            font-size: 14px;
        }

        .spec-label {
            font-weight: normal;
            color: #4499cc;
            letter-spacing: 1px;
        }

        .spec-value {
            color: #66ccff;
            font-weight: 700;
            text-align: right;
        }

        /* Reference Panel Styles */
        .reference-panel {
            background: #002244;
            border: 2px solid #0066cc;
            margin: 0 30px 20px 30px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .reference-header {
            background: linear-gradient(180deg, #0066cc 0%, #004499 100%);
            color: white;
            padding: 12px 15px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            letter-spacing: 1px;
        }

        .reference-header:hover {
            background: linear-gradient(180deg, #0077dd 0%, #0055aa 100%);
        }

        .reference-toggle {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .reference-toggle.expanded {
            transform: rotate(180deg);
        }

        .reference-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            background: #001a33;
        }

        .reference-content.expanded {
            max-height: 800px;
            padding: 20px;
        }

        .reference-section {
            margin-bottom: 20px;
        }

        .reference-section h4 {
            color: #66ccff;
            border-bottom: 1px solid #0066cc;
            padding-bottom: 5px;
            margin-bottom: 10px;
            letter-spacing: 1px;
            font-size: 14px;
        }

        .reference-facts {
            background: #002244;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid #0066cc;
        }

        .reference-facts ul {
            margin: 0;
            padding-left: 20px;
        }

        .reference-facts li {
            margin-bottom: 8px;
            color: #66ccff;
            font-size: 14px;
        }

        /* Enhanced Scale Visualization Styles */
        .scale-metaphor {
            background: #002244;
            border: 2px solid #0066cc;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }

        .scale-metaphor-title {
            color: #66ccff;
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .scale-objects {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .scale-object {
            text-align: center;
            flex: 1;
            margin: 10px;
            min-width: 120px;
        }

        .scale-object-visual {
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            border-radius: 50%;
            border: 3px solid #0066cc;
        }

        .scale-object-1 {
            background: linear-gradient(135deg, #0066cc, #004488);
        }

        .scale-object-2 {
            background: linear-gradient(135deg, #0077dd, #0055aa);
        }

        .scale-object-name {
            font-weight: bold;
            color: #66ccff;
            font-size: 13px;
        }

        .scale-explanation {
            background: #001a33;
            padding: 15px;
            margin-top: 15px;
            font-style: italic;
            color: #66ccff;
            border: 1px solid #0066cc;
        }

        .info-button {
            background: linear-gradient(180deg, #0066cc 0%, #004499 100%);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            font-size: 14px;
            cursor: pointer;
            margin-left: 8px;
            transition: all 0.3s ease;
        }

        .info-button:hover {
            background: linear-gradient(180deg, #0077dd 0%, #0055aa 100%);
            transform: scale(1.1);
        }

        /* Timeline Styles */
        .timeline-section {
            background: #002244;
            padding: 30px;
            margin: 0 30px 30px 30px;
            border: 2px solid #0066cc;
            color: #66ccff;
        }

        .timeline-title {
            text-align: center;
            font-size: 20px;
            margin-bottom: 30px;
            color: #66ccff;
            letter-spacing: 3px;
            border-bottom: 1px solid #0066cc;
            padding-bottom: 10px;
        }

        .timeline-container {
            position: relative;
            max-width: 100%;
            overflow-x: auto;
            padding: 20px 0;
        }

        .timeline {
            display: flex;
            align-items: center;
            min-width: 1000px;
            position: relative;
            padding: 40px 0;
        }

        .timeline-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #0066cc, #004488);
            transform: translateY(-50%);
        }

        .timeline-item {
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
            min-width: 120px;
        }

        .timeline-dot {
            width: 20px;
            height: 20px;
            background: #001a33;
            border: 4px solid #0066cc;
            border-radius: 50%;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .timeline-dot.highlighted {
            width: 30px;
            height: 30px;
            background: #0077dd;
            border: 6px solid #0066cc;
            box-shadow: 0 0 20px rgba(0, 119, 221, 0.6);
            animation: pulse 2s infinite;
        }

        .timeline-dot.comparison {
            width: 25px;
            height: 25px;
            background: #66ccff;
            border: 5px solid #0066cc;
            box-shadow: 0 0 15px rgba(102, 204, 255, 0.5);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 20px rgba(0, 119, 221, 0.6); }
            50% { box-shadow: 0 0 30px rgba(0, 119, 221, 0.9); }
            100% { box-shadow: 0 0 20px rgba(0, 119, 221, 0.6); }
        }

        .timeline-content {
            text-align: center;
            margin-top: 15px;
            max-width: 140px;
        }

        .timeline-year {
            font-weight: bold;
            font-size: 14px;
            color: #66ccff;
            margin-bottom: 5px;
        }

        .timeline-computer {
            font-size: 13px;
            line-height: 1.2;
            color: #66ccff;
            margin-bottom: 5px;
        }

        .timeline-computer.highlighted {
            color: #0077dd;
            font-weight: bold;
        }

        .timeline-computer.comparison {
            color: #66ccff;
            font-weight: bold;
        }

        .timeline-description {
            font-size: 11px;
            color: #4499cc;
            line-height: 1.2;
        }

        .timeline-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid;
        }

        .legend-comparison {
            background: #66ccff;
            border-color: #0066cc;
        }

        .legend-highlighted {
            background: #0077dd;
            border-color: #0066cc;
        }

        .legend-milestone {
            background: #001a33;
            border-color: #0066cc;
        }

        /* Custom Build Modal Styles */
        .custom-build-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            overflow-y: auto;
        }

        .custom-build-modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .custom-build-panel {
            background: #002244;
            border: 5px solid #004488;
            padding: 30px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .custom-build-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #0066cc;
        }

        .custom-build-header h2 {
            color: #66ccff;
            font-size: 20px;
            margin: 0;
            letter-spacing: 3px;
        }

        .close-button {
            background: linear-gradient(180deg, #0066cc 0%, #004499 100%);
            color: white;
            border: 2px solid #0066cc;
            width: 36px;
            height: 36px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-button:hover {
            background: linear-gradient(180deg, #0077dd 0%, #0055aa 100%);
        }

        .custom-build-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .custom-build-field {
            background: #001a33;
            padding: 15px;
            border: 2px solid #0066cc;
        }

        .custom-build-field label {
            display: block;
            font-weight: bold;
            color: #99ddff;
            margin-bottom: 8px;
            font-size: 14px;
            letter-spacing: 1px;
        }

        .custom-build-field input,
        .custom-build-field select {
            width: 100%;
            padding: 10px;
            border: 2px solid #0066cc;
            font-size: 14px;
            background: #001a33;
            color: #66ccff;
            font-family: 'Courier Prime', monospace;
        }

        .custom-build-field input:focus,
        .custom-build-field select:focus {
            outline: none;
            border-color: #66ccff;
            box-shadow: 0 0 10px rgba(102, 204, 255, 0.5);
        }

        .custom-build-field .helper-text {
            font-size: 12px;
            color: #4499cc;
            margin-top: 5px;
        }

        .computed-value {
            background: #001a33;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
            border: 2px solid #0066cc;
        }

        .computed-value .label {
            font-weight: bold;
            color: #66ccff;
            font-size: 14px;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .computed-value .value {
            color: #66ccff;
            font-size: 24px;
            font-weight: bold;
        }

        .custom-build-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier Prime', monospace;
            letter-spacing: 2px;
        }

        .btn-primary {
            background: linear-gradient(180deg, #0066cc 0%, #004499 100%);
            color: white;
            border: 2px solid #0066cc;
        }

        .btn-primary:hover {
            background: linear-gradient(180deg, #0077dd 0%, #0055aa 100%);
        }

        .btn-secondary {
            background: #002244;
            color: #66ccff;
            border: 2px solid #0066cc;
        }

        .btn-secondary:hover {
            background: #003366;
        }

        .preset-selector {
            background: #001a33;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid #0066cc;
        }

        .preset-selector h3 {
            color: #66ccff;
            margin-bottom: 12px;
            font-size: 16px;
            letter-spacing: 2px;
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
        }

        .preset-btn {
            padding: 8px 12px;
            background: #002244;
            border: 2px solid #0066cc;
            color: #66ccff;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier Prime', monospace;
        }

        .preset-btn:hover {
            background: linear-gradient(180deg, #0066cc 0%, #004499 100%);
            color: white;
        }

        /* Mainframe Footer */
        .mainframe-footer {
            background: #002244;
            border-top: 3px solid #0066cc;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #4499cc;
            letter-spacing: 1px;
        }

        .status-ready {
            color: #66ccff;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .selectors, .spec-cards {
                grid-template-columns: 1fr;
            }

            .spec-card:nth-child(2n) {
                border-left: 2px solid #0066cc;
            }

            h1 {
                font-size: 22px;
                letter-spacing: 4px;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .circle-comparison {
                flex-direction: column;
                gap: 20px;
            }

            .scale-objects {
                flex-direction: column;
            }

            .scale-object {
                margin: 10px 0;
            }

            .custom-build-grid {
                grid-template-columns: 1fr;
            }

            .custom-build-panel {
                padding: 20px;
            }

            .preset-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>COMPUTER EVOLUTION ANALYZER</h1>
        <p class="subtitle">BATCH PROCESSING SYSTEM :: 1946-2024 DATABASE</p>

        <div class="explainer">
            <strong>SYSTEM NOTE:</strong> Modern processors use multiple cores, higher instructions-per-cycle (IPC), and advanced architectures. A 2GHz dual-core vastly outperforms a 4GHz single-core from 2000!
            <br><br>
            <strong>NEW FEATURE:</strong> Create custom builds mixing components from different eras! Want to see how a 1980s CPU with modern RAM compares? Try the Custom Build feature!
        </div>
        
        <div class="selectors">
            <div class="selector-group">
                <h3>COMPUTER_1_ID:</h3>
                <select id="computer1">
                    <option value="">Select a computer...</option>
                </select>
            </div>
            <div class="selector-group">
                <h3>COMPUTER_2_ID:</h3>
                <select id="computer2">
                    <option value="">Select a computer...</option>
                </select>
            </div>
        </div>

        <div id="results" style="display: none;">
            <div class="summary-section">
                <div class="summary-title">EXECUTION OUTPUT</div>
                <div class="summary-grid" id="summary-grid"></div>
                <div class="compute-breakdown" id="compute-breakdown"></div>
            </div>

            <div class="visualizations">
                <div class="vis-title">VISUAL ANALYSIS</div>
                <div id="visual-content"></div>
            </div>

            <div class="spec-cards" id="spec-cards"></div>

            <div class="timeline-section" id="timeline-section">
                <div class="timeline-title">COMPUTING HISTORY TIMELINE</div>
                <div class="timeline-container">
                    <div class="timeline" id="timeline"></div>
                </div>
                <div class="timeline-legend">
                    <div class="legend-item">
                        <div class="legend-dot legend-comparison"></div>
                        <span>Your Compared Computers</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot legend-highlighted"></div>
                        <span>Key Milestones</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot legend-milestone"></div>
                        <span>Historical Context</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mainframe-footer">
            <span>SYSTEMS ANALYZED: 60+</span>
            <span>TIMESPAN: 1946-2024</span>
            <span class="status-ready">READY</span>
        </div>
    </div>

    <!-- Custom Build Modal -->
    <div id="customBuildModal1" class="custom-build-modal">
        <div class="custom-build-panel">
            <div class="custom-build-header">
                <h2>Custom Build - Computer 1</h2>
                <button class="close-button" onclick="closeCustomBuild(1)">×</button>
            </div>

            <div class="preset-selector">
                <h3>Quick Start with Presets</h3>
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="loadPreset(1, 'eniac')">ENIAC (1946)</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'c64')">Commodore 64</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'pentium')">Pentium PC</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'iphone')">iPhone (2007)</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'm1')">Apple M1</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'ryzen9')">Ryzen 9</button>
                    <button class="preset-btn" onclick="loadPreset(1, 'rpi4')">Raspberry Pi 4</button>
                </div>
            </div>

            <div class="computed-value">
                <div class="label">Computed Power</div>
                <div class="value" id="customCompute1">0 MIPS</div>
                <div class="helper-text">Cores × MHz × IPC</div>
            </div>

            <div class="custom-build-grid">
                <div class="custom-build-field">
                    <label>Computer Name</label>
                    <input type="text" id="customName1" placeholder="My Custom Build" value="Custom Build 1">
                    <div class="helper-text">Name your custom computer</div>
                </div>

                <div class="custom-build-field">
                    <label>Year</label>
                    <input type="number" id="customYear1" min="1940" max="2030" value="2024">
                    <div class="helper-text">1940-2030</div>
                </div>

                <div class="custom-build-field">
                    <label>CPU Frequency (MHz)</label>
                    <input type="number" id="customCpu1" min="0.0001" max="10000" step="0.1" value="3000" oninput="updateCustomCompute(1)">
                    <div class="helper-text">0.0001 - 10000 MHz</div>
                </div>

                <div class="custom-build-field">
                    <label>Number of Cores</label>
                    <input type="number" id="customCores1" min="1" max="128" value="8" oninput="updateCustomCompute(1)">
                    <div class="helper-text">1 - 128 cores</div>
                </div>

                <div class="custom-build-field">
                    <label>Architecture (bits)</label>
                    <select id="customBits1">
                        <option value="8">8-bit</option>
                        <option value="16">16-bit</option>
                        <option value="32">32-bit</option>
                        <option value="64" selected>64-bit</option>
                        <option value="128">128-bit</option>
                    </select>
                </div>

                <div class="custom-build-field">
                    <label>IPC (Instructions Per Cycle)</label>
                    <input type="number" id="customIpc1" min="0.05" max="10" step="0.1" value="4.0" oninput="updateCustomCompute(1)">
                    <div class="helper-text">0.05 - 10.0 IPC</div>
                </div>

                <div class="custom-build-field">
                    <label>Memory (KB)</label>
                    <input type="number" id="customMemory1" min="0" max="1099511627776" value="16777216">
                    <div class="helper-text">In kilobytes (KB)</div>
                </div>

                <div class="custom-build-field">
                    <label>Storage (KB)</label>
                    <input type="number" id="customStorage1" min="0" max="1099511627776000" value="1073741824">
                    <div class="helper-text">In kilobytes (KB)</div>
                </div>

                <div class="custom-build-field">
                    <label>Weight (kg)</label>
                    <input type="number" id="customWeight1" min="0.001" max="10000000" step="0.1" value="2.5">
                    <div class="helper-text">In kilograms</div>
                </div>

                <div class="custom-build-field">
                    <label>Power Consumption (Watts)</label>
                    <input type="number" id="customPower1" min="0.01" max="100000000" step="0.1" value="150">
                    <div class="helper-text">In watts</div>
                </div>

                <div class="custom-build-field">
                    <label>Cost (USD)</label>
                    <input type="number" id="customCost1" min="0" max="10000000000" value="1500">
                    <div class="helper-text">In US dollars</div>
                </div>

                <div class="custom-build-field">
                    <label>Category</label>
                    <select id="customCategory1">
                        <option value="Custom Build" selected>Custom Build</option>
                        <option value="Personal Computer">Personal Computer</option>
                        <option value="Mobile Device">Mobile Device</option>
                        <option value="Laptop">Laptop</option>
                        <option value="Gaming Console">Gaming Console</option>
                        <option value="Single Board Computer">Single Board Computer</option>
                        <option value="Supercomputer">Supercomputer</option>
                    </select>
                </div>
            </div>

            <div class="custom-build-actions">
                <button class="btn btn-secondary" onclick="closeCustomBuild(1)">Cancel</button>
                <button class="btn btn-primary" onclick="saveCustomBuild(1)">Apply Custom Build</button>
            </div>
        </div>
    </div>

    <div id="customBuildModal2" class="custom-build-modal">
        <div class="custom-build-panel">
            <div class="custom-build-header">
                <h2>Custom Build - Computer 2</h2>
                <button class="close-button" onclick="closeCustomBuild(2)">×</button>
            </div>

            <div class="preset-selector">
                <h3>Quick Start with Presets</h3>
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="loadPreset(2, 'eniac')">ENIAC (1946)</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'c64')">Commodore 64</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'pentium')">Pentium PC</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'iphone')">iPhone (2007)</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'm1')">Apple M1</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'ryzen9')">Ryzen 9</button>
                    <button class="preset-btn" onclick="loadPreset(2, 'rpi4')">Raspberry Pi 4</button>
                </div>
            </div>

            <div class="computed-value">
                <div class="label">Computed Power</div>
                <div class="value" id="customCompute2">0 MIPS</div>
                <div class="helper-text">Cores × MHz × IPC</div>
            </div>

            <div class="custom-build-grid">
                <div class="custom-build-field">
                    <label>Computer Name</label>
                    <input type="text" id="customName2" placeholder="My Custom Build" value="Custom Build 2">
                    <div class="helper-text">Name your custom computer</div>
                </div>

                <div class="custom-build-field">
                    <label>Year</label>
                    <input type="number" id="customYear2" min="1940" max="2030" value="2024">
                    <div class="helper-text">1940-2030</div>
                </div>

                <div class="custom-build-field">
                    <label>CPU Frequency (MHz)</label>
                    <input type="number" id="customCpu2" min="0.0001" max="10000" step="0.1" value="3000" oninput="updateCustomCompute(2)">
                    <div class="helper-text">0.0001 - 10000 MHz</div>
                </div>

                <div class="custom-build-field">
                    <label>Number of Cores</label>
                    <input type="number" id="customCores2" min="1" max="128" value="8" oninput="updateCustomCompute(2)">
                    <div class="helper-text">1 - 128 cores</div>
                </div>

                <div class="custom-build-field">
                    <label>Architecture (bits)</label>
                    <select id="customBits2">
                        <option value="8">8-bit</option>
                        <option value="16">16-bit</option>
                        <option value="32">32-bit</option>
                        <option value="64" selected>64-bit</option>
                        <option value="128">128-bit</option>
                    </select>
                </div>

                <div class="custom-build-field">
                    <label>IPC (Instructions Per Cycle)</label>
                    <input type="number" id="customIpc2" min="0.05" max="10" step="0.1" value="4.0" oninput="updateCustomCompute(2)">
                    <div class="helper-text">0.05 - 10.0 IPC</div>
                </div>

                <div class="custom-build-field">
                    <label>Memory (KB)</label>
                    <input type="number" id="customMemory2" min="0" max="1099511627776" value="16777216">
                    <div class="helper-text">In kilobytes (KB)</div>
                </div>

                <div class="custom-build-field">
                    <label>Storage (KB)</label>
                    <input type="number" id="customStorage2" min="0" max="1099511627776000" value="1073741824">
                    <div class="helper-text">In kilobytes (KB)</div>
                </div>

                <div class="custom-build-field">
                    <label>Weight (kg)</label>
                    <input type="number" id="customWeight2" min="0.001" max="10000000" step="0.1" value="2.5">
                    <div class="helper-text">In kilograms</div>
                </div>

                <div class="custom-build-field">
                    <label>Power Consumption (Watts)</label>
                    <input type="number" id="customPower2" min="0.01" max="100000000" step="0.1" value="150">
                    <div class="helper-text">In watts</div>
                </div>

                <div class="custom-build-field">
                    <label>Cost (USD)</label>
                    <input type="number" id="customCost2" min="0" max="10000000000" value="1500">
                    <div class="helper-text">In US dollars</div>
                </div>

                <div class="custom-build-field">
                    <label>Category</label>
                    <select id="customCategory2">
                        <option value="Custom Build" selected>Custom Build</option>
                        <option value="Personal Computer">Personal Computer</option>
                        <option value="Mobile Device">Mobile Device</option>
                        <option value="Laptop">Laptop</option>
                        <option value="Gaming Console">Gaming Console</option>
                        <option value="Single Board Computer">Single Board Computer</option>
                        <option value="Supercomputer">Supercomputer</option>
                    </select>
                </div>
            </div>

            <div class="custom-build-actions">
                <button class="btn btn-secondary" onclick="closeCustomBuild(2)">Cancel</button>
                <button class="btn btn-primary" onclick="saveCustomBuild(2)">Apply Custom Build</button>
            </div>
        </div>
    </div>

    <script>
        const computers = {
            // Early Computers (1940s-1950s)
            'eniac': {
                name: 'ENIAC (1946)',
                year: 1946,
                cpu: 0.0001,
                cores: 1,
                bits: 10,
                ipc: 0.05,
                compute_power: 0.005,
                memory: 0.0195,
                storage: 0,
                weight: 27000,
                power: 150000,
                cost: 6000000,
                category: 'Early Computer'
            },
            'univac1': {
                name: 'UNIVAC I (1951)',
                year: 1951,
                cpu: 0.002,
                cores: 1,
                bits: 12,
                ipc: 0.1,
                compute_power: 0.0002,
                memory: 1,
                storage: 0,
                weight: 7300,
                power: 125000,
                cost: 15000000,
                category: 'Early Computer'
            },

            // Space Computers
            'apollo': {
                name: 'Apollo Guidance Computer (1966)',
                year: 1966,
                cpu: 2.048,
                cores: 1,
                bits: 16,
                ipc: 0.5,
                compute_power: 1.024,
                memory: 4,
                storage: 36,
                weight: 32,
                power: 55,
                cost: 3500000,
                category: 'Space Computer'
            },
            'voyager': {
                name: 'Voyager Computer (1977)',
                year: 1977,
                cpu: 4,
                cores: 1,
                bits: 18,
                ipc: 0.6,
                compute_power: 2.4,
                memory: 68,
                storage: 8,
                weight: 4.2,
                power: 28,
                cost: 900000,
                category: 'Space Computer'
            },
            'shuttle': {
                name: 'Space Shuttle Computer (1981)',
                year: 1981,
                cpu: 1.4,
                cores: 1,
                bits: 32,
                ipc: 0.7,
                compute_power: 0.98,
                memory: 104,
                storage: 106,
                weight: 29,
                power: 550,
                cost: 2000000,
                category: 'Space Computer'
            },

            // Fictional Computers
            'hal9000': {
                name: 'HAL 9000 (2001: Space Odyssey)',
                year: 1968,
                cpu: 1000,
                cores: 1000,
                bits: 64,
                ipc: 10.0,
                compute_power: 10000000,
                memory: 1048576000,
                storage: 1073741824000,
                weight: 5000,
                power: 100000,
                cost: 50000000,
                category: 'Fictional Computer'
            },
            'jurassic_sgi': {
                name: 'Jurassic Park SGI (1993 Movie)',
                year: 1993,
                cpu: 150,
                cores: 1,
                bits: 64,
                ipc: 2.5,
                compute_power: 375,
                memory: 131072,
                storage: 4194304,
                weight: 45,
                power: 400,
                cost: 100000,
                category: 'Fictional Computer'
            },
            'wopr': {
                name: 'WOPR (WarGames 1983)',
                year: 1983,
                cpu: 50,
                cores: 100,
                bits: 32,
                ipc: 2.0,
                compute_power: 10000,
                memory: 1048576,
                storage: 10485760,
                weight: 10000,
                power: 500000,
                cost: 75000000,
                category: 'Fictional Computer'
            },
            'skynet': {
                name: 'Skynet (Terminator 1984)',
                year: 1984,
                cpu: 1000,
                cores: 10000,
                bits: 64,
                ipc: 8.0,
                compute_power: 80000000,
                memory: 1073741824,
                storage: 1099511627776,
                weight: 50000,
                power: 10000000,
                cost: 1000000000,
                category: 'Fictional Computer'
            },
            'mother': {
                name: 'Mother (Alien 1979)',
                year: 1979,
                cpu: 100,
                cores: 50,
                bits: 32,
                ipc: 3.0,
                compute_power: 15000,
                memory: 524288,
                storage: 52428800,
                weight: 2000,
                power: 250000,
                cost: 25000000,
                category: 'Fictional Computer'
            },
            'enterprise': {
                name: 'Enterprise Computer (Star Trek)',
                year: 1966,
                cpu: 10000,
                cores: 100000,
                bits: 128,
                ipc: 50.0,
                compute_power: 50000000000,
                memory: 1099511627776000,
                storage: 1125899906842624000,
                weight: 100000,
                power: 1000000000,
                cost: 10000000000,
                category: 'Fictional Computer'
            },

            // Calculators
            'hp35': {
                name: 'HP-35 Calculator (1972)',
                year: 1972,
                cpu: 0.2,
                cores: 1,
                bits: 56,
                ipc: 0.05,
                compute_power: 0.01,
                memory: 0.768,
                storage: 0,
                weight: 0.255,
                power: 0.8,
                cost: 2000,
                category: 'Calculator'
            },
            'ti81': {
                name: 'TI-81 Calculator (1990)',
                year: 1990,
                cpu: 2,
                cores: 1,
                bits: 8,
                ipc: 0.5,
                compute_power: 1.0,
                memory: 2.4,
                storage: 0,
                weight: 0.275,
                power: 0.05,
                cost: 110,
                category: 'Calculator'
            },
            'ti89': {
                name: 'TI-89 Calculator (1998)',
                year: 1998,
                cpu: 10,
                cores: 1,
                bits: 32,
                ipc: 0.8,
                compute_power: 8.0,
                memory: 188,
                storage: 2048,
                weight: 0.31,
                power: 0.2,
                cost: 180,
                category: 'Calculator'
            },

            // Early Personal Computers
            'altair8800': {
                name: 'Altair 8800 (1975)',
                year: 1975,
                cpu: 2,
                cores: 1,
                bits: 8,
                ipc: 0.25,
                compute_power: 0.5,
                memory: 1,
                storage: 0,
                weight: 18,
                power: 60,
                cost: 5000,
                category: 'Personal Computer'
            },
            'apple2': {
                name: 'Apple II (1977)',
                year: 1977,
                cpu: 1,
                cores: 1,
                bits: 8,
                ipc: 0.43,
                compute_power: 0.43,
                memory: 48,
                storage: 140,
                weight: 5.5,
                power: 45,
                cost: 7500,
                category: 'Personal Computer'
            },
            'c64': {
                name: 'Commodore 64 (1982)',
                year: 1982,
                cpu: 1,
                cores: 1,
                bits: 8,
                ipc: 0.4,
                compute_power: 0.4,
                memory: 64,
                storage: 170,
                weight: 1.8,
                power: 10,
                cost: 1500,
                category: 'Personal Computer'
            },
            'amiga500': {
                name: 'Commodore Amiga 500 (1987)',
                year: 1987,
                cpu: 7.16,
                cores: 1,
                bits: 32,
                ipc: 0.6,
                compute_power: 4.3,
                memory: 512,
                storage: 880,
                weight: 4.3,
                power: 40,
                cost: 3000,
                category: 'Personal Computer'
            },

            // IBM PC Era
            'ibmpc': {
                name: 'IBM PC (1981)',
                year: 1981,
                cpu: 4.77,
                cores: 1,
                bits: 16,
                ipc: 0.33,
                compute_power: 1.57,
                memory: 256,
                storage: 360,
                weight: 11.3,
                power: 130,
                cost: 8000,
                category: 'Personal Computer'
            },
            'ibmxt': {
                name: 'IBM PC XT (1983)',
                year: 1983,
                cpu: 4.77,
                cores: 1,
                bits: 16,
                ipc: 0.33,
                compute_power: 1.57,
                memory: 640,
                storage: 10240,
                weight: 15,
                power: 135,
                cost: 6000,
                category: 'Personal Computer'
            },
            'ibmat': {
                name: 'IBM PC AT (1984)',
                year: 1984,
                cpu: 6,
                cores: 1,
                bits: 16,
                ipc: 0.5,
                compute_power: 3.0,
                memory: 512,
                storage: 20480,
                weight: 21,
                power: 200,
                cost: 8000,
                category: 'Personal Computer'
            },

            // 386/486 Era
            'i386': {
                name: '386 PC (1985)',
                year: 1985,
                cpu: 16,
                cores: 1,
                bits: 32,
                ipc: 0.6,
                compute_power: 9.6,
                memory: 4096,
                storage: 40960,
                weight: 18,
                power: 150,
                cost: 7000,
                category: 'Personal Computer'
            },
            'i486': {
                name: '486 PC (1989)',
                year: 1989,
                cpu: 25,
                cores: 1,
                bits: 32,
                ipc: 0.8,
                compute_power: 20,
                memory: 8192,
                storage: 102400,
                weight: 16,
                power: 180,
                cost: 4000,
                category: 'Personal Computer'
            },

            // Pentium Era
            'pentium': {
                name: 'Pentium PC (1993)',
                year: 1993,
                cpu: 60,
                cores: 1,
                bits: 32,
                ipc: 1.67,
                compute_power: 100,
                memory: 16384,
                storage: 524288,
                weight: 12,
                power: 200,
                cost: 3000,
                category: 'Personal Computer'
            },
            'pentium2': {
                name: 'Pentium II PC (1997)',
                year: 1997,
                cpu: 233,
                cores: 1,
                bits: 32,
                ipc: 2.0,
                compute_power: 466,
                memory: 65536,
                storage: 4194304,
                weight: 10,
                power: 250,
                cost: 2500,
                category: 'Personal Computer'
            },
            'pentium3': {
                name: 'Pentium III PC (1999)',
                year: 1999,
                cpu: 500,
                cores: 1,
                bits: 32,
                ipc: 2.2,
                compute_power: 1100,
                memory: 131072,
                storage: 10485760,
                weight: 8,
                power: 300,
                cost: 2000,
                category: 'Personal Computer'
            },
            'pentium4': {
                name: 'Pentium 4 PC (2000)',
                year: 2000,
                cpu: 1500,
                cores: 1,
                bits: 32,
                ipc: 1.0,
                compute_power: 1500,
                memory: 524288,
                storage: 41943040,
                weight: 7,
                power: 350,
                cost: 1800,
                category: 'Personal Computer'
            },

            // Core Era
            'coreduo': {
                name: 'Core Duo PC (2006)',
                year: 2006,
                cpu: 1830,
                cores: 2,
                bits: 32,
                ipc: 2.8,
                compute_power: 10248,
                memory: 2097152,
                storage: 167772160,
                weight: 5,
                power: 280,
                cost: 1500,
                category: 'Personal Computer'
            },
            'core2': {
                name: 'Core 2 Duo PC (2007)',
                year: 2007,
                cpu: 2400,
                cores: 2,
                bits: 64,
                ipc: 3.2,
                compute_power: 15360,
                memory: 4194304,
                storage: 524288000,
                weight: 4.5,
                power: 250,
                cost: 1200,
                category: 'Personal Computer'
            },
            'i3': {
                name: 'Core i3 PC (2010)',
                year: 2010,
                cpu: 2930,
                cores: 2,
                bits: 64,
                ipc: 3.5,
                compute_power: 20510,
                memory: 8388608,
                storage: 1048576000,
                weight: 4,
                power: 220,
                cost: 800,
                category: 'Personal Computer'
            },
            'i5': {
                name: 'Core i5 PC (2012)',
                year: 2012,
                cpu: 3300,
                cores: 4,
                bits: 64,
                ipc: 3.8,
                compute_power: 50160,
                memory: 16777216,
                storage: 1048576000,
                weight: 4,
                power: 200,
                cost: 1000,
                category: 'Personal Computer'
            },
            'i7': {
                name: 'Core i7 PC (2015)',
                year: 2015,
                cpu: 4000,
                cores: 4,
                bits: 64,
                ipc: 4.0,
                compute_power: 64000,
                memory: 33554432,
                storage: 2097152000,
                weight: 3.5,
                power: 180,
                cost: 1500,
                category: 'Personal Computer'
            },
            'i9': {
                name: 'Core i9 PC (2018)',
                year: 2018,
                cpu: 5000,
                cores: 8,
                bits: 64,
                ipc: 4.5,
                compute_power: 180000,
                memory: 67108864,
                storage: 4194304000,
                weight: 3,
                power: 250,
                cost: 2500,
                category: 'Personal Computer'
            },

            // AMD Processors
            'athlon': {
                name: 'AMD Athlon PC (1999)',
                year: 1999,
                cpu: 500,
                cores: 1,
                bits: 32,
                ipc: 2.3,
                compute_power: 1150,
                memory: 131072,
                storage: 10485760,
                weight: 8,
                power: 280,
                cost: 1800,
                category: 'Personal Computer'
            },
            'athlon64': {
                name: 'AMD Athlon 64 PC (2003)',
                year: 2003,
                cpu: 2000,
                cores: 1,
                bits: 64,
                ipc: 2.5,
                compute_power: 5000,
                memory: 1048576,
                storage: 83886080,
                weight: 6,
                power: 180,
                cost: 1500,
                category: 'Personal Computer'
            },
            'ryzen3': {
                name: 'Ryzen 3 PC (2017)',
                year: 2017,
                cpu: 3200,
                cores: 4,
                bits: 64,
                ipc: 4.2,
                compute_power: 53760,
                memory: 16777216,
                storage: 1073741824,
                weight: 3.2,
                power: 120,
                cost: 800,
                category: 'Personal Computer'
            },
            'ryzen5': {
                name: 'Ryzen 5 PC (2017)',
                year: 2017,
                cpu: 3600,
                cores: 6,
                bits: 64,
                ipc: 4.5,
                compute_power: 97200,
                memory: 33554432,
                storage: 2097152000,
                weight: 3.2,
                power: 160,
                cost: 1200,
                category: 'Personal Computer'
            },
            'ryzen7': {
                name: 'Ryzen 7 PC (2019)',
                year: 2019,
                cpu: 4300,
                cores: 8,
                bits: 64,
                ipc: 4.7,
                compute_power: 161480,
                memory: 67108864,
                storage: 4194304000,
                weight: 3,
                power: 180,
                cost: 1800,
                category: 'Personal Computer'
            },
            'ryzen9': {
                name: 'Ryzen 9 PC (2021)',
                year: 2021,
                cpu: 5200,
                cores: 12,
                bits: 64,
                ipc: 4.8,
                compute_power: 299520,
                memory: 134217728,
                storage: 8388608000,
                weight: 3,
                power: 200,
                cost: 3000,
                category: 'Personal Computer'
            },

            // Apple Silicon
            'm1': {
                name: 'Apple M1 Mac (2020)',
                year: 2020,
                cpu: 3200,
                cores: 8,
                bits: 64,
                ipc: 7.0,
                compute_power: 179200,
                memory: 16777216,
                storage: 1073741824,
                weight: 1.3,
                power: 25,
                cost: 1300,
                category: 'Apple Silicon'
            },
            'm2': {
                name: 'Apple M2 Mac (2022)',
                year: 2022,
                cpu: 3500,
                cores: 8,
                bits: 64,
                ipc: 7.5,
                compute_power: 210000,
                memory: 25165824,
                storage: 1073741824,
                weight: 1.24,
                power: 30,
                cost: 1500,
                category: 'Apple Silicon'
            },
            'm3': {
                name: 'Apple M3 Mac (2023)',
                year: 2023,
                cpu: 4100,
                cores: 8,
                bits: 64,
                ipc: 8.0,
                compute_power: 262400,
                memory: 25165824,
                storage: 1073741824,
                weight: 1.22,
                power: 28,
                cost: 1700,
                category: 'Apple Silicon'
            },
            'm4': {
                name: 'Apple M4 Mac (2024)',
                year: 2024,
                cpu: 4400,
                cores: 10,
                bits: 64,
                ipc: 8.5,
                compute_power: 374000,
                memory: 33554432,
                storage: 1073741824,
                weight: 1.18,
                power: 25,
                cost: 1800,
                category: 'Apple Silicon'
            },

            // ARM/Mobile Processors
            'snapdragon855': {
                name: 'Snapdragon 855 Phone (2019)',
                year: 2019,
                cpu: 2840,
                cores: 8,
                bits: 64,
                ipc: 4.0,
                compute_power: 90880,
                memory: 12582912,
                storage: 268435456,
                weight: 0.18,
                power: 4.5,
                cost: 700,
                category: 'ARM/Mobile'
            },
            'snapdragon8gen2': {
                name: 'Snapdragon 8 Gen 2 Phone (2023)',
                year: 2023,
                cpu: 3360,
                cores: 8,
                bits: 64,
                ipc: 6.5,
                compute_power: 174720,
                memory: 16777216,
                storage: 1073741824,
                weight: 0.19,
                power: 6.0,
                cost: 900,
                category: 'ARM/Mobile'
            },

            // Laptops Through Eras
            'osborne1': {
                name: 'Osborne 1 (1981)',
                year: 1981,
                cpu: 4,
                cores: 1,
                bits: 8,
                ipc: 0.3,
                compute_power: 1.2,
                memory: 64,
                storage: 180,
                weight: 10.7,
                power: 60,
                cost: 4000,
                category: 'Laptop'
            },
            'laptop_486': {
                name: '486 Laptop (1992)',
                year: 1992,
                cpu: 33,
                cores: 1,
                bits: 32,
                ipc: 0.8,
                compute_power: 26.4,
                memory: 4096,
                storage: 102400,
                weight: 3.2,
                power: 25,
                cost: 4500,
                category: 'Laptop'
            },
            'thinkpad': {
                name: 'ThinkPad 701 (1995)',
                year: 1995,
                cpu: 75,
                cores: 1,
                bits: 32,
                ipc: 1.2,
                compute_power: 90,
                memory: 8192,
                storage: 524288,
                weight: 2.1,
                power: 30,
                cost: 3500,
                category: 'Laptop'
            },
            'powerbook': {
                name: 'PowerBook G3 (1997)',
                year: 1997,
                cpu: 233,
                cores: 1,
                bits: 32,
                ipc: 1.8,
                compute_power: 419.4,
                memory: 32768,
                storage: 2097152,
                weight: 2.7,
                power: 35,
                cost: 3000,
                category: 'Laptop'
            },
            'centrino': {
                name: 'Centrino Laptop (2003)',
                year: 2003,
                cpu: 1600,
                cores: 1,
                bits: 32,
                ipc: 2.0,
                compute_power: 3200,
                memory: 1048576,
                storage: 83886080,
                weight: 2.2,
                power: 45,
                cost: 2000,
                category: 'Laptop'
            },
            'macbook': {
                name: 'MacBook Pro (2006)',
                year: 2006,
                cpu: 2160,
                cores: 1,
                bits: 32,
                ipc: 2.8,
                compute_power: 6048,
                memory: 2097152,
                storage: 125829120,
                weight: 2.54,
                power: 85,
                cost: 2500,
                category: 'Laptop'
            },
            'ultrabook': {
                name: 'Ultrabook (2012)',
                year: 2012,
                cpu: 2600,
                cores: 2,
                bits: 64,
                ipc: 3.8,
                compute_power: 19760,
                memory: 8388608,
                storage: 268435456,
                weight: 1.3,
                power: 45,
                cost: 1200,
                category: 'Laptop'
            },
            'modern_laptop': {
                name: 'Modern Laptop (2024)',
                year: 2024,
                cpu: 4800,
                cores: 8,
                bits: 64,
                ipc: 5.5,
                compute_power: 211200,
                memory: 33554432,
                storage: 1073741824,
                weight: 1.5,
                power: 65,
                cost: 1500,
                category: 'Laptop'
            },

            // Mobile Devices Evolution
            'iphone': {
                name: 'iPhone (2007)',
                year: 2007,
                cpu: 412,
                cores: 1,
                bits: 32,
                ipc: 1.0,
                compute_power: 412,
                memory: 131072,
                storage: 8388608,
                weight: 0.135,
                power: 2,
                cost: 600,
                category: 'Mobile Device'
            },
            'iphone4': {
                name: 'iPhone 4 (2010)',
                year: 2010,
                cpu: 1000,
                cores: 1,
                bits: 32,
                ipc: 2.0,
                compute_power: 2000,
                memory: 524288,
                storage: 33554432,
                weight: 0.137,
                power: 2.5,
                cost: 600,
                category: 'Mobile Device'
            },
            'iphone6': {
                name: 'iPhone 6 (2014)',
                year: 2014,
                cpu: 1400,
                cores: 2,
                bits: 64,
                ipc: 3.5,
                compute_power: 9800,
                memory: 1048576,
                storage: 134217728,
                weight: 0.129,
                power: 3,
                cost: 650,
                category: 'Mobile Device'
            },
            'iphonex': {
                name: 'iPhone X (2017)',
                year: 2017,
                cpu: 2390,
                cores: 6,
                bits: 64,
                ipc: 5.0,
                compute_power: 71700,
                memory: 3145728,
                storage: 268435456,
                weight: 0.174,
                power: 3.5,
                cost: 1000,
                category: 'Mobile Device'
            },
            'iphone14': {
                name: 'iPhone 14 (2022)',
                year: 2022,
                cpu: 3230,
                cores: 6,
                bits: 64,
                ipc: 6.0,
                compute_power: 116280,
                memory: 6291456,
                storage: 1073741824,
                weight: 0.172,
                power: 3.5,
                cost: 800,
                category: 'Mobile Device'
            },
            'iphone15pro': {
                name: 'iPhone 15 Pro (2023)',
                year: 2023,
                cpu: 3780,
                cores: 6,
                bits: 64,
                ipc: 7.0,
                compute_power: 158760,
                memory: 8388608,
                storage: 1073741824,
                weight: 0.187,
                power: 4.0,
                cost: 1000,
                category: 'Mobile Device'
            },
            'galaxys3': {
                name: 'Samsung Galaxy S3 (2012)',
                year: 2012,
                cpu: 1400,
                cores: 4,
                bits: 32,
                ipc: 2.5,
                compute_power: 14000,
                memory: 2097152,
                storage: 33554432,
                weight: 0.133,
                power: 3.5,
                cost: 600,
                category: 'Mobile Device'
            },
            'galaxys8': {
                name: 'Samsung Galaxy S8 (2017)',
                year: 2017,
                cpu: 2350,
                cores: 8,
                bits: 64,
                ipc: 4.0,
                compute_power: 75200,
                memory: 4194304,
                storage: 67108864,
                weight: 0.155,
                power: 3.8,
                cost: 750,
                category: 'Mobile Device'
            },
            'galaxys21': {
                name: 'Samsung Galaxy S21 (2021)',
                year: 2021,
                cpu: 2840,
                cores: 8,
                bits: 64,
                ipc: 5.5,
                compute_power: 125040,
                memory: 8388608,
                storage: 268435456,
                weight: 0.169,
                power: 4.2,
                cost: 800,
                category: 'Mobile Device'
            },
            'galaxys24ultra': {
                name: 'Samsung Galaxy S24 Ultra (2024)',
                year: 2024,
                cpu: 3390,
                cores: 8,
                bits: 64,
                ipc: 7.5,
                compute_power: 203400,
                weight: 0.232,
                memory: 12582912,
                storage: 1073741824,
                power: 5.0,
                cost: 1200,
                category: 'Mobile Device'
            },
            'pixel': {
                name: 'Google Pixel (2016)',
                year: 2016,
                cpu: 2150,
                cores: 4,
                bits: 64,
                ipc: 3.5,
                compute_power: 30100,
                memory: 4194304,
                storage: 134217728,
                weight: 0.143,
                power: 3.5,
                cost: 650,
                category: 'Mobile Device'
            },
            'pixel7': {
                name: 'Google Pixel 7 Pro (2022)',
                year: 2022,
                cpu: 2850,
                cores: 8,
                bits: 64,
                ipc: 5.8,
                compute_power: 132240,
                memory: 12582912,
                storage: 268435456,
                weight: 0.212,
                power: 4.5,
                cost: 900,
                category: 'Mobile Device'
            },
            'pixel8pro': {
                name: 'Google Pixel 8 Pro (2023)',
                year: 2023,
                cpu: 3000,
                cores: 9,
                bits: 64,
                ipc: 6.5,
                compute_power: 175500,
                memory: 12582912,
                storage: 268435456,
                weight: 0.213,
                power: 4.8,
                cost: 1000,
                category: 'Mobile Device'
            },
            'oneplus5t': {
                name: 'OnePlus 5T (2017)',
                year: 2017,
                cpu: 2450,
                cores: 8,
                bits: 64,
                ipc: 4.0,
                compute_power: 78400,
                memory: 8388608,
                storage: 134217728,
                weight: 0.162,
                power: 3.5,
                cost: 500,
                category: 'Mobile Device'
            },
            'ipad': {
                name: 'iPad (2010)',
                year: 2010,
                cpu: 1000,
                cores: 1,
                bits: 32,
                ipc: 2.0,
                compute_power: 2000,
                memory: 262144,
                storage: 67108864,
                weight: 0.68,
                power: 10,
                cost: 500,
                category: 'Tablet'
            },
            'ipad3': {
                name: 'iPad 3 Retina (2012)',
                year: 2012,
                cpu: 1000,
                cores: 2,
                bits: 32,
                ipc: 2.5,
                compute_power: 5000,
                memory: 1048576,
                storage: 67108864,
                weight: 0.652,
                power: 11,
                cost: 500,
                category: 'Tablet'
            },
            'ipadair2': {
                name: 'iPad Air 2 (2014)',
                year: 2014,
                cpu: 1500,
                cores: 3,
                bits: 64,
                ipc: 4.0,
                compute_power: 18000,
                memory: 2097152,
                storage: 134217728,
                weight: 0.437,
                power: 10,
                cost: 500,
                category: 'Tablet'
            },
            'ipadpro11': {
                name: 'iPad Pro 11" M2 (2022)',
                year: 2022,
                cpu: 3490,
                cores: 8,
                bits: 64,
                ipc: 6.5,
                compute_power: 181480,
                memory: 8388608,
                storage: 268435456,
                weight: 0.466,
                power: 12,
                cost: 800,
                category: 'Tablet'
            },
            'galaxytab': {
                name: 'Samsung Galaxy Tab S7 (2020)',
                year: 2020,
                cpu: 3090,
                cores: 8,
                bits: 64,
                ipc: 5.0,
                compute_power: 123600,
                memory: 6291456,
                storage: 134217728,
                weight: 0.575,
                power: 11,
                cost: 650,
                category: 'Tablet'
            },
            'galaxytabs9': {
                name: 'Samsung Galaxy Tab S9 Ultra (2023)',
                year: 2023,
                cpu: 3360,
                cores: 8,
                bits: 64,
                ipc: 6.5,
                compute_power: 174720,
                memory: 16777216,
                storage: 1073741824,
                weight: 0.732,
                power: 15,
                cost: 1200,
                category: 'Tablet'
            },
            'surfacepro': {
                name: 'Microsoft Surface Pro 7 (2019)',
                year: 2019,
                cpu: 1600,
                cores: 4,
                bits: 64,
                ipc: 4.5,
                compute_power: 28800,
                memory: 8388608,
                storage: 268435456,
                weight: 0.776,
                power: 18,
                cost: 750,
                category: 'Tablet'
            },
            'surfacepro9': {
                name: 'Microsoft Surface Pro 9 (2022)',
                year: 2022,
                cpu: 2800,
                cores: 10,
                bits: 64,
                ipc: 5.0,
                compute_power: 140000,
                memory: 16777216,
                storage: 536870912,
                weight: 0.879,
                power: 20,
                cost: 1000,
                category: 'Tablet'
            },
            'kindlefire': {
                name: 'Amazon Fire HD 10 (2021)',
                year: 2021,
                cpu: 2000,
                cores: 8,
                bits: 64,
                ipc: 2.5,
                compute_power: 40000,
                memory: 3145728,
                storage: 67108864,
                weight: 0.465,
                power: 8,
                cost: 150,
                category: 'Tablet'
            },

            // Raspberry Pi
            'rpi1': {
                name: 'Raspberry Pi 1 (2012)',
                year: 2012,
                cpu: 700,
                cores: 1,
                bits: 32,
                ipc: 1.5,
                compute_power: 1050,
                memory: 524288,
                storage: 8388608,
                weight: 0.045,
                power: 3.5,
                cost: 35,
                category: 'Single Board Computer'
            },
            'rpi2': {
                name: 'Raspberry Pi 2 (2015)',
                year: 2015,
                cpu: 900,
                cores: 4,
                bits: 32,
                ipc: 1.8,
                compute_power: 6480,
                memory: 1048576,
                storage: 16777216,
                weight: 0.045,
                power: 4,
                cost: 35,
                category: 'Single Board Computer'
            },
            'rpi3': {
                name: 'Raspberry Pi 3 (2016)',
                year: 2016,
                cpu: 1200,
                cores: 4,
                bits: 64,
                ipc: 2.0,
                compute_power: 9600,
                memory: 1048576,
                storage: 33554432,
                weight: 0.045,
                power: 5.1,
                cost: 35,
                category: 'Single Board Computer'
            },
            'rpi4': {
                name: 'Raspberry Pi 4 (2019)',
                year: 2019,
                cpu: 1500,
                cores: 4,
                bits: 64,
                ipc: 2.5,
                compute_power: 15000,
                memory: 8388608,
                storage: 67108864,
                weight: 0.046,
                power: 6.4,
                cost: 75,
                category: 'Single Board Computer'
            },

            // Gaming Consoles
            'nintendo_nes': {
                name: 'Nintendo NES (1985)',
                year: 1985,
                cpu: 1.79,
                cores: 1,
                bits: 8,
                ipc: 0.3,
                compute_power: 0.537,
                memory: 2,
                storage: 32,
                weight: 0.68,
                power: 9,
                cost: 400,
                category: 'Gaming Console'
            },
            'ps1': {
                name: 'PlayStation 1 (1994)',
                year: 1994,
                cpu: 33,
                cores: 1,
                bits: 32,
                ipc: 0.8,
                compute_power: 26.4,
                memory: 2048,
                storage: 650000,
                weight: 1.5,
                power: 25,
                cost: 600,
                category: 'Gaming Console'
            },
            'ps5': {
                name: 'PlayStation 5 (2020)',
                year: 2020,
                cpu: 3800,
                cores: 8,
                bits: 64,
                ipc: 4.2,
                compute_power: 127680,
                memory: 16777216,
                storage: 875000000,
                weight: 4.5,
                power: 200,
                cost: 500,
                category: 'Gaming Console'
            },

            // Supercomputers
            'cray1': {
                name: 'Cray-1 Supercomputer (1975)',
                year: 1975,
                cpu: 80,
                cores: 1,
                bits: 64,
                ipc: 2.0,
                compute_power: 160,
                memory: 8388608,
                storage: 39321600,
                weight: 5500,
                power: 115000,
                cost: 35000000,
                category: 'Supercomputer'
            },
            'cray2': {
                name: 'Cray-2 (1985)',
                year: 1985,
                cpu: 244,
                cores: 4,
                bits: 64,
                ipc: 2.5,
                compute_power: 2440,
                memory: 268435456,
                storage: 134217728000,
                weight: 2500,
                power: 200000,
                cost: 30000000,
                category: 'Supercomputer'
            },
            'deepblue': {
                name: 'Deep Blue (1997)',
                year: 1997,
                cpu: 200,
                cores: 480,
                bits: 32,
                ipc: 2.0,
                compute_power: 192000,
                memory: 1073741824,
                storage: 1073741824000,
                weight: 1270,
                power: 30000,
                cost: 100000000,
                category: 'Supercomputer'
            },
            'frontier': {
                name: 'Frontier Supercomputer (2022)',
                year: 2022,
                cpu: 2250,
                cores: 9400000,
                bits: 64,
                ipc: 4.0,
                compute_power: 84600000000,
                memory: 9663676416000,
                storage: 734003200000000000,
                weight: 8000000,
                power: 21000000,
                cost: 600000000,
                category: 'Supercomputer'
            },

            // Latest Intel (2023-2024)
            'i9_13900k': {
                name: 'Core i9-13900K PC (2023)',
                year: 2023,
                cpu: 5800,
                cores: 24,
                bits: 64,
                ipc: 5.0,
                compute_power: 696000,
                memory: 134217728,
                storage: 8388608000,
                weight: 3,
                power: 253,
                cost: 3500,
                category: 'Personal Computer'
            },
            'i9_14900k': {
                name: 'Core i9-14900K PC (2024)',
                year: 2024,
                cpu: 6000,
                cores: 24,
                bits: 64,
                ipc: 5.2,
                compute_power: 748800,
                memory: 134217728,
                storage: 8388608000,
                weight: 2.8,
                power: 253,
                cost: 4000,
                category: 'Personal Computer'
            },
            'ultra9_285k': {
                name: 'Core Ultra 9 285K PC (2024)',
                year: 2024,
                cpu: 5700,
                cores: 24,
                bits: 64,
                ipc: 5.5,
                compute_power: 752400,
                memory: 201326592,
                storage: 8388608000,
                weight: 2.7,
                power: 250,
                cost: 4200,
                category: 'Personal Computer'
            },

            // Latest AMD (2023-2024)
            'ryzen9_7950x3d': {
                name: 'Ryzen 9 7950X3D PC (2023)',
                year: 2023,
                cpu: 5700,
                cores: 16,
                bits: 64,
                ipc: 5.0,
                compute_power: 456000,
                memory: 134217728,
                storage: 8388608000,
                weight: 2.9,
                power: 120,
                cost: 3500,
                category: 'Personal Computer'
            },
            'ryzen9_9950x': {
                name: 'Ryzen 9 9950X PC (2024)',
                year: 2024,
                cpu: 5700,
                cores: 16,
                bits: 64,
                ipc: 5.3,
                compute_power: 483360,
                memory: 201326592,
                storage: 8388608000,
                weight: 2.8,
                power: 170,
                cost: 4000,
                category: 'Personal Computer'
            },

            // More Apple Silicon (2023-2024)
            'm3_pro': {
                name: 'Apple M3 Pro Mac (2023)',
                year: 2023,
                cpu: 4100,
                cores: 12,
                bits: 64,
                ipc: 8.2,
                compute_power: 403440,
                memory: 37748736,
                storage: 1073741824,
                weight: 1.6,
                power: 35,
                cost: 2000,
                category: 'Apple Silicon'
            },
            'm3_max': {
                name: 'Apple M3 Max Mac (2023)',
                year: 2023,
                cpu: 4100,
                cores: 16,
                bits: 64,
                ipc: 8.3,
                compute_power: 544480,
                memory: 134217728,
                storage: 1073741824,
                weight: 2.1,
                power: 45,
                cost: 3500,
                category: 'Apple Silicon'
            },
            'm4_pro': {
                name: 'Apple M4 Pro Mac (2024)',
                year: 2024,
                cpu: 4400,
                cores: 14,
                bits: 64,
                ipc: 8.7,
                compute_power: 536008,
                memory: 50331648,
                storage: 1073741824,
                weight: 1.55,
                power: 38,
                cost: 2200,
                category: 'Apple Silicon'
            },
            'm4_max': {
                name: 'Apple M4 Max Mac (2024)',
                year: 2024,
                cpu: 4500,
                cores: 16,
                bits: 64,
                ipc: 8.8,
                compute_power: 633600,
                memory: 134217728,
                storage: 2147483648,
                weight: 2.0,
                power: 48,
                cost: 3800,
                category: 'Apple Silicon'
            },

            // Latest Mobile (2023-2024)
            'a17_pro': {
                name: 'iPhone 15 Pro - A17 Pro (2023)',
                year: 2023,
                cpu: 3780,
                cores: 6,
                bits: 64,
                ipc: 6.5,
                compute_power: 147420,
                memory: 8388608,
                storage: 1073741824,
                weight: 0.187,
                power: 4.0,
                cost: 1000,
                category: 'Mobile Device'
            },
            'a18_pro': {
                name: 'iPhone 16 Pro - A18 Pro (2024)',
                year: 2024,
                cpu: 4050,
                cores: 6,
                bits: 64,
                ipc: 7.0,
                compute_power: 170100,
                memory: 8388608,
                storage: 1073741824,
                weight: 0.199,
                power: 4.2,
                cost: 1200,
                category: 'Mobile Device'
            },
            'snapdragon8gen3': {
                name: 'Snapdragon 8 Gen 3 Phone (2024)',
                year: 2024,
                cpu: 3400,
                cores: 8,
                bits: 64,
                ipc: 7.0,
                compute_power: 190400,
                memory: 16777216,
                storage: 1073741824,
                weight: 0.20,
                power: 6.5,
                cost: 1000,
                category: 'ARM/Mobile'
            },

            // More Gaming Consoles
            'xbox_series_x': {
                name: 'Xbox Series X (2020)',
                year: 2020,
                cpu: 3800,
                cores: 8,
                bits: 64,
                ipc: 4.0,
                compute_power: 121600,
                memory: 16777216,
                storage: 1024000000,
                weight: 4.45,
                power: 215,
                cost: 500,
                category: 'Gaming Console'
            },
            'steam_deck': {
                name: 'Steam Deck (2022)',
                year: 2022,
                cpu: 3500,
                cores: 4,
                bits: 64,
                ipc: 4.5,
                compute_power: 63000,
                memory: 16777216,
                storage: 536870912,
                weight: 0.669,
                power: 45,
                cost: 400,
                category: 'Gaming Console'
            },
            'ps5_pro': {
                name: 'PlayStation 5 Pro (2024)',
                year: 2024,
                cpu: 3850,
                cores: 8,
                bits: 64,
                ipc: 4.5,
                compute_power: 138600,
                memory: 16777216,
                storage: 2048000000,
                weight: 3.1,
                power: 220,
                cost: 700,
                category: 'Gaming Console'
            },

            // Latest Single Board Computers
            'rpi5': {
                name: 'Raspberry Pi 5 (2023)',
                year: 2023,
                cpu: 2400,
                cores: 4,
                bits: 64,
                ipc: 3.0,
                compute_power: 28800,
                memory: 8388608,
                storage: 67108864,
                weight: 0.045,
                power: 12,
                cost: 80,
                category: 'Single Board Computer'
            },

            // AI/Server Chips
            'nvidia_grace_hopper': {
                name: 'NVIDIA Grace Hopper (2023)',
                year: 2023,
                cpu: 3500,
                cores: 72,
                bits: 64,
                ipc: 5.0,
                compute_power: 1260000,
                memory: 503316480,
                storage: 8388608000,
                weight: 15,
                power: 1000,
                cost: 30000,
                category: 'Supercomputer'
            },

            // VR/AR Devices
            'quest3': {
                name: 'Meta Quest 3 (2023)',
                year: 2023,
                cpu: 2360,
                cores: 8,
                bits: 64,
                ipc: 6.0,
                compute_power: 113280,
                memory: 8388608,
                storage: 134217728,
                weight: 0.515,
                power: 18,
                cost: 500,
                category: 'ARM/Mobile'
            },

            // Data Center Servers
            'epyc_9754': {
                name: 'AMD EPYC 9754 Server (2023)',
                year: 2023,
                cpu: 3100,
                cores: 128,
                bits: 64,
                ipc: 4.5,
                compute_power: 1785600,
                memory: 536870912,
                storage: 4194304000,
                weight: 5,
                power: 360,
                cost: 11900,
                category: 'Data Center Server'
            },
            'epyc_9654': {
                name: 'AMD EPYC 9654 Server (2023)',
                year: 2023,
                cpu: 3700,
                cores: 96,
                bits: 64,
                ipc: 5.0,
                compute_power: 1776000,
                memory: 536870912,
                storage: 4194304000,
                weight: 5,
                power: 360,
                cost: 10000,
                category: 'Data Center Server'
            },
            'xeon_8592': {
                name: 'Intel Xeon Platinum 8592+ Server (2024)',
                year: 2024,
                cpu: 3900,
                cores: 64,
                bits: 64,
                ipc: 4.5,
                compute_power: 1123200,
                memory: 536870912,
                storage: 4194304000,
                weight: 5,
                power: 350,
                cost: 11600,
                category: 'Data Center Server'
            },

            // Modern Supercomputers (2024)
            'el_capitan': {
                name: 'El Capitan Supercomputer (2024)',
                year: 2024,
                cpu: 1800,
                cores: 11039616,
                bits: 64,
                ipc: 4.0,
                compute_power: 79485235200,
                memory: 10066329600000,
                storage: 734003200000000,
                weight: 10000000,
                power: 21000000,
                cost: 600000000,
                category: 'Supercomputer'
            },
            'aurora': {
                name: 'Aurora Supercomputer (2024)',
                year: 2024,
                cpu: 1500,
                cores: 10624000,
                bits: 64,
                ipc: 3.5,
                compute_power: 55776000000,
                memory: 8589934592000,
                storage: 524288000000000,
                weight: 8000000,
                power: 20000000,
                cost: 500000000,
                category: 'Supercomputer'
            }
        };

        function populateDropdowns() {
            const select1 = document.getElementById('computer1');
            const select2 = document.getElementById('computer2');

            // Add Custom Build option at the top
            const customOptgroup1 = document.createElement('optgroup');
            const customOptgroup2 = document.createElement('optgroup');
            customOptgroup1.label = customOptgroup2.label = 'Custom';

            const customOption1 = new Option('🔧 Create Custom Build...', 'custom_build_1');
            const customOption2 = new Option('🔧 Create Custom Build...', 'custom_build_2');
            customOptgroup1.appendChild(customOption1);
            customOptgroup2.appendChild(customOption2);

            select1.appendChild(customOptgroup1);
            select2.appendChild(customOptgroup2);

            const categories = {};
            Object.keys(computers).forEach(key => {
                const cat = computers[key].category;
                if (!categories[cat]) categories[cat] = [];
                categories[cat].push({ key, name: computers[key].name });
            });

            Object.keys(categories).sort().forEach(category => {
                const optgroup1 = document.createElement('optgroup');
                const optgroup2 = document.createElement('optgroup');
                optgroup1.label = optgroup2.label = category;

                categories[category].forEach(comp => {
                    const option1 = new Option(comp.name, comp.key);
                    const option2 = new Option(comp.name, comp.key);
                    optgroup1.appendChild(option1);
                    optgroup2.appendChild(option2);
                });

                select1.appendChild(optgroup1);
                select2.appendChild(optgroup2);
            });
        }

        // Custom Build Functions
        function openCustomBuild(computerNum) {
            const modal = document.getElementById(`customBuildModal${computerNum}`);
            modal.classList.add('active');
            updateCustomCompute(computerNum);
        }

        function closeCustomBuild(computerNum) {
            const modal = document.getElementById(`customBuildModal${computerNum}`);
            modal.classList.remove('active');
        }

        function updateCustomCompute(computerNum) {
            const cpu = parseFloat(document.getElementById(`customCpu${computerNum}`).value) || 0;
            const cores = parseInt(document.getElementById(`customCores${computerNum}`).value) || 1;
            const ipc = parseFloat(document.getElementById(`customIpc${computerNum}`).value) || 1;

            const computePower = cores * cpu * ipc;
            document.getElementById(`customCompute${computerNum}`).textContent = formatNumber(computePower) + ' MIPS';
        }

        function loadPreset(computerNum, presetId) {
            if (!computers[presetId]) return;

            const preset = computers[presetId];
            document.getElementById(`customName${computerNum}`).value = preset.name.split('(')[0].trim() + ' (Preset)';
            document.getElementById(`customYear${computerNum}`).value = preset.year;
            document.getElementById(`customCpu${computerNum}`).value = preset.cpu;
            document.getElementById(`customCores${computerNum}`).value = preset.cores;
            document.getElementById(`customBits${computerNum}`).value = preset.bits;
            document.getElementById(`customIpc${computerNum}`).value = preset.ipc;
            document.getElementById(`customMemory${computerNum}`).value = preset.memory;
            document.getElementById(`customStorage${computerNum}`).value = preset.storage;
            document.getElementById(`customWeight${computerNum}`).value = preset.weight;
            document.getElementById(`customPower${computerNum}`).value = preset.power;
            document.getElementById(`customCost${computerNum}`).value = preset.cost;
            document.getElementById(`customCategory${computerNum}`).value = preset.category;

            updateCustomCompute(computerNum);
        }

        function saveCustomBuild(computerNum) {
            const customId = `custom_build_${computerNum}`;

            const name = document.getElementById(`customName${computerNum}`).value;
            const year = parseInt(document.getElementById(`customYear${computerNum}`).value);
            const cpu = parseFloat(document.getElementById(`customCpu${computerNum}`).value);
            const cores = parseInt(document.getElementById(`customCores${computerNum}`).value);
            const bits = parseInt(document.getElementById(`customBits${computerNum}`).value);
            const ipc = parseFloat(document.getElementById(`customIpc${computerNum}`).value);
            const memory = parseFloat(document.getElementById(`customMemory${computerNum}`).value);
            const storage = parseFloat(document.getElementById(`customStorage${computerNum}`).value);
            const weight = parseFloat(document.getElementById(`customWeight${computerNum}`).value);
            const power = parseFloat(document.getElementById(`customPower${computerNum}`).value);
            const cost = parseFloat(document.getElementById(`customCost${computerNum}`).value);
            const category = document.getElementById(`customCategory${computerNum}`).value;

            const computePower = cores * cpu * ipc;

            // Add or update the custom build in the computers object
            computers[customId] = {
                name: `${name} (${year})`,
                year: year,
                cpu: cpu,
                cores: cores,
                bits: bits,
                ipc: ipc,
                compute_power: computePower,
                memory: memory,
                storage: storage,
                weight: weight,
                power: power,
                cost: cost,
                category: category
            };

            // Update the dropdown to show the custom build
            const select = document.getElementById(`computer${computerNum}`);

            // Remove old custom build option if it exists
            const oldOption = select.querySelector(`option[value="${customId}"]`);
            if (oldOption) {
                oldOption.remove();
            }

            // Add new custom build option to the Custom optgroup
            const customOptgroup = select.querySelector('optgroup[label="Custom"]');
            const newOption = new Option(`${name} ✨`, customId);
            customOptgroup.appendChild(newOption);

            // Select the custom build
            select.value = customId;

            // Close modal and trigger comparison
            closeCustomBuild(computerNum);
            displayComparison();
        }

        function formatNumber(num) {
            if (num >= 1000000000) return (num/1000000000).toFixed(1) + 'B';
            if (num >= 1000000) return (num/1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num/1000).toFixed(1) + 'K';
            return num.toLocaleString();
        }

        function formatMemoryStorage(kb) {
            if (kb >= 1073741824) return `${(kb/1073741824).toFixed(1)} TB (${formatNumber(kb)} KB)`;
            if (kb >= 1048576) return `${(kb/1048576).toFixed(1)} GB (${formatNumber(kb)} KB)`;
            if (kb >= 1024) return `${(kb/1024).toFixed(1)} MB (${formatNumber(kb)} KB)`;
            return `${kb.toLocaleString()} KB`;
        }

        function getComparisonLanguage(category, isComputer1Better) {
            const languages = {
                'Computational Power': isComputer1Better ? 'more powerful' : 'less powerful',
                'Memory': isComputer1Better ? 'has more memory' : 'has less memory',
                'Storage': isComputer1Better ? 'has more storage' : 'has less storage',
                'Power Consumption': isComputer1Better ? 'more power efficient' : 'less power efficient',
                'Weight': isComputer1Better ? 'lighter' : 'heavier'
            };
            return languages[category] || (isComputer1Better ? 'better' : 'worse');
        }

        function createVisualization(ratio, name1, name2, category) {
            if (ratio < 2) return '';
            
            const container = document.createElement('div');
            container.className = 'comparison-row';
            
            let visualization = '';
            let ratioText = `${ratio.toFixed(1)}× difference`;
            
            if (ratio <= 20) {
                // Simple bar chart for small differences
                const height1 = 30;
                const height2 = height1 * ratio;
                const maxHeight = Math.min(height2, 80);
                const scaledHeight1 = (height1 / height2) * maxHeight;
                const scaledHeight2 = maxHeight;
                
                visualization = `
                    <div class="simple-bars">
                        <div class="simple-bar" style="height: ${scaledHeight1}px;">${name1}</div>
                        <div class="simple-bar" style="height: ${scaledHeight2}px;">${name2}</div>
                    </div>
                `;
            } else if (ratio <= 1000) {
                // Circle comparison for medium differences
                const radius1 = 20;
                const radius2 = Math.min(radius1 * Math.sqrt(ratio), 80);
                
                visualization = `
                    <div class="circle-comparison">
                        <div class="circle-item">
                            <div class="circle" style="width: ${radius1*2}px; height: ${radius1*2}px;">${name1}</div>
                            <div class="circle-label">${name1}</div>
                        </div>
                        <div class="circle-item">
                            <div class="circle" style="width: ${radius2*2}px; height: ${radius2*2}px;">${name2}</div>
                            <div class="circle-label">${name2}</div>
                        </div>
                    </div>
                `;
            } else {
                // Scale representation for huge differences with metaphor
                visualization = `
                    <div class="scale-representation">
                        <div class="scale-small">● ${name1}</div>
                        <div style="margin: 10px 0; color: #95a5a6;">vs</div>
                        <div class="scale-large">● ${name2}</div>
                        <div style="margin-top: 10px; color: #e74c3c; font-weight: bold;">
                            Difference too large to visualize proportionally!
                        </div>
                    </div>
                    ${createScaleMetaphor(ratio, name1, name2)}
                `;
            }
            
            container.innerHTML = `
                <div class="comparison-header">
                    ${category} <span class="ratio-badge">${ratioText}</span>
                </div>
                ${visualization}
            `;
            
            return container;
        }

        function displayComparison() {
            const comp1 = document.getElementById('computer1').value;
            const comp2 = document.getElementById('computer2').value;

            if (!comp1 || !comp2) {
                document.getElementById('results').style.display = 'none';
                return;
            }

            const computer1 = computers[comp1];
            const computer2 = computers[comp2];

            // Summary section
            const summaryGrid = document.getElementById('summary-grid');
            summaryGrid.innerHTML = '';

            const comparisons = [
                { label: 'Computational Power', key: 'compute_power', unit: 'MIPS' },
                { label: 'Memory', key: 'memory', unit: 'KB' },
                { label: 'Storage', key: 'storage', unit: 'KB' },
                { label: 'Power Consumption', key: 'power', unit: 'W' },
                { label: 'Weight', key: 'weight', unit: 'kg' }
            ];

            comparisons.forEach(comp => {
                const val1 = computer1[comp.key];
                const val2 = computer2[comp.key];
                
                if (val1 > 0 && val2 > 0) {
                    const ratio = Math.max(val1, val2) / Math.min(val1, val2);
                    
                    // Determine if computer1 is better than computer2
                    let isComputer1Better;
                    if (comp.key === 'power' || comp.key === 'weight') {
                        // For power and weight, lower is better
                        isComputer1Better = val1 < val2;
                    } else {
                        // For compute, memory, storage, higher is better
                        isComputer1Better = val1 > val2;
                    }
                    
                    const computer1Name = computer1.name.split('(')[0].trim();
                    const comparison = getComparisonLanguage(comp.label, isComputer1Better);
                    
                    const summaryItem = document.createElement('div');
                    summaryItem.className = 'summary-item';
                    summaryItem.innerHTML = `
                        <div class="summary-label">${comp.label}</div>
                        <div class="summary-value">${ratio.toFixed(1)}×</div>
                        <div style="font-size: 0.8em; color: #7f8c8d; margin-top: 5px;">${computer1Name} ${comparison}</div>
                    `;
                    summaryGrid.appendChild(summaryItem);
                }
            });

            // Compute breakdown
            const computeBreakdown = document.getElementById('compute-breakdown');
            computeBreakdown.innerHTML = `
                <div class="compute-breakdown-title">🧠 How Computational Power is Calculated</div>
                <div class="compute-formula">${computer1.name.split('(')[0].trim()}: ${computer1.cores} cores × ${computer1.cpu} MHz × ${computer1.ipc} IPC = ${formatNumber(computer1.compute_power)} MIPS</div>
                <div class="compute-formula">${computer2.name.split('(')[0].trim()}: ${computer2.cores} cores × ${computer2.cpu} MHz × ${computer2.ipc} IPC = ${formatNumber(computer2.compute_power)} MIPS</div>
                <div style="margin-top: 10px; text-align: center; color: #8e44ad;">
                    <strong>Power Efficiency:</strong> ${(computer1.compute_power / computer1.power).toFixed(1)} vs ${(computer2.compute_power / computer2.power).toFixed(1)} MIPS/Watt
                </div>
            `;

            // Visual comparisons
            const visualContent = document.getElementById('visual-content');
            visualContent.innerHTML = '';

            comparisons.forEach(comp => {
                const val1 = computer1[comp.key];
                const val2 = computer2[comp.key];
                
                if (val1 > 0 && val2 > 0) {
                    const ratio = Math.max(val1, val2) / Math.min(val1, val2);
                    if (ratio > 1.5) {
                        const larger = val1 > val2 ? computer1.name.split('(')[0].trim() : computer2.name.split('(')[0].trim();
                        const smaller = val1 > val2 ? computer2.name.split('(')[0].trim() : computer1.name.split('(')[0].trim();
                        
                        const visualization = createVisualization(ratio, smaller, larger, comp.label);
                        if (visualization) {
                            visualContent.appendChild(visualization);
                        }
                    }
                }
            });

            // Spec cards
            const specCards = document.getElementById('spec-cards');
            specCards.innerHTML = `
                <div class="spec-card">
                    <h3>${computer1.name}</h3>
                    <div class="spec-row"><span class="spec-label">Category:</span><span class="spec-value">${computer1.category}</span></div>
                    <div class="spec-row"><span class="spec-label">CPU:</span><span class="spec-value">${computer1.cores} × ${computer1.cpu} MHz (${computer1.bits}-bit)</span></div>
                    <div class="spec-row"><span class="spec-label">IPC:</span><span class="spec-value">${computer1.ipc} instructions/cycle</span></div>
                    <div class="spec-row"><span class="spec-label">Compute Power:</span><span class="spec-value">${formatNumber(computer1.compute_power)} MIPS</span></div>
                    <div class="spec-row"><span class="spec-label">Memory:</span><span class="spec-value">${formatMemoryStorage(computer1.memory)}</span></div>
                    <div class="spec-row"><span class="spec-label">Storage:</span><span class="spec-value">${formatMemoryStorage(computer1.storage)}</span></div>
                    <div class="spec-row"><span class="spec-label">Weight:</span><span class="spec-value">${computer1.weight} kg</span></div>
                    <div class="spec-row"><span class="spec-label">Power:</span><span class="spec-value">${computer1.power} W</span></div>
                    <div class="spec-row"><span class="spec-label">Efficiency:</span><span class="spec-value">${(computer1.compute_power/computer1.power).toFixed(1)} MIPS/W</span></div>
                    ${createReferencePanel(comp1, computer1.name)}
                </div>
                <div class="spec-card">
                    <h3>${computer2.name}</h3>
                    <div class="spec-row"><span class="spec-label">Category:</span><span class="spec-value">${computer2.category}</span></div>
                    <div class="spec-row"><span class="spec-label">CPU:</span><span class="spec-value">${computer2.cores} × ${computer2.cpu} MHz (${computer2.bits}-bit)</span></div>
                    <div class="spec-row"><span class="spec-label">IPC:</span><span class="spec-value">${computer2.ipc} instructions/cycle</span></div>
                    <div class="spec-row"><span class="spec-label">Compute Power:</span><span class="spec-value">${formatNumber(computer2.compute_power)} MIPS</span></div>
                    <div class="spec-row"><span class="spec-label">Memory:</span><span class="spec-value">${formatMemoryStorage(computer2.memory)}</span></div>
                    <div class="spec-row"><span class="spec-label">Storage:</span><span class="spec-value">${formatMemoryStorage(computer2.storage)}</span></div>
                    <div class="spec-row"><span class="spec-label">Weight:</span><span class="spec-value">${computer2.weight} kg</span></div>
                    <div class="spec-row"><span class="spec-label">Power:</span><span class="spec-value">${computer2.power} W</span></div>
                    <div class="spec-row"><span class="spec-label">Efficiency:</span><span class="spec-value">${(computer2.compute_power/computer2.power).toFixed(1)} MIPS/W</span></div>
                    ${createReferencePanel(comp2, computer2.name)}
                </div>
            `;

            // Create timeline
            createTimeline(comp1, comp2);

            document.getElementById('results').style.display = 'block';
        }

        // Reference system variables - embedded data for file:// protocol compatibility
        let referenceData = {
            "eniac": {
                "name": "ENIAC (Electronic Numerical Integrator and Computer)",
                "year": 1946,
                "overview": "The first general-purpose electronic digital computer, ENIAC was a revolutionary machine that marked the beginning of the computer age.",
                "historical_significance": "ENIAC demonstrated that electronic computation was faster and more reliable than mechanical systems, paving the way for modern computing.",
                "technical_details": {
                    "architecture": "Decimal-based calculation using vacuum tubes",
                    "programming": "Programmed by manually setting switches and rewiring connections",
                    "vacuum_tubes": 17468,
                    "dimensions": "30 × 50 feet (roughly 1,800 square feet)",
                    "weight_details": "30 tons (27,000 kg)",
                    "power_consumption": "150 kW - enough to power 150 homes"
                },
                "development": {
                    "location": "University of Pennsylvania",
                    "developers": "J. Presper Eckert and John Mauchly",
                    "funding": "U.S. Army for ballistic calculations",
                    "development_time": "3 years (1943-1946)",
                    "cost": "$500,000 (approximately $7.2 million in 2024 dollars)"
                },
                "applications": [
                    "Ballistic trajectory calculations",
                    "Weather prediction",
                    "Nuclear weapons design calculations",
                    "General mathematical computations"
                ],
                "legacy": "ENIAC proved electronic computation was viable and influenced virtually every computer that followed.",
                "interesting_facts": [
                    "Could perform 5,000 additions per second",
                    "Programming required physical rewiring that could take days",
                    "Generated so much heat that nearby rooms needed cooling",
                    "Was classified as top secret during initial operation"
                ]
            },
            "univac1": {
                "name": "UNIVAC I (UNIVersal Automatic Computer I)",
                "year": 1951,
                "overview": "The first commercial computer produced in the United States, UNIVAC I gained fame by correctly predicting Eisenhower's presidential victory.",
                "historical_significance": "First computer to handle both numeric and alphabetic data, marking the transition from purely mathematical machines to business computers.",
                "technical_details": {
                    "architecture": "Binary number system with magnetic tape storage",
                    "memory": "1,000 words of mercury delay line memory",
                    "storage": "Magnetic tape system - revolutionary for the time",
                    "vacuum_tubes": 5200,
                    "weight_details": "13 tons (11,800 kg) for the central processor"
                },
                "development": {
                    "location": "Eckert-Mauchly Computer Corporation",
                    "developers": "J. Presper Eckert and John Mauchly (ENIAC creators)",
                    "first_delivery": "March 1951 to the U.S. Census Bureau",
                    "total_produced": 46,
                    "cost": "$1.6 million (approximately $18.5 million in 2024 dollars)"
                },
                "applications": [
                    "Census data processing",
                    "Business data processing",
                    "Scientific calculations",
                    "Election prediction (famously predicted 1952 presidential election)"
                ],
                "legacy": "Established the commercial computer industry and demonstrated computers' potential beyond pure mathematics.",
                "interesting_facts": [
                    "Correctly predicted Eisenhower's victory with only 7% of votes counted",
                    "CBS initially didn't trust the prediction and delayed broadcasting it",
                    "Could process 1,905 operations per second",
                    "Each system came with its own air conditioning unit"
                ]
            },
            "ibm704": {
                "name": "IBM 704",
                "year": 1954,
                "overview": "IBM's first mass-produced computer with floating-point arithmetic, establishing IBM's dominance in the computer industry.",
                "historical_significance": "First computer to use magnetic core memory and floating-point arithmetic, setting standards that lasted decades.",
                "technical_details": {
                    "architecture": "36-bit word length with floating-point arithmetic",
                    "memory": "4,096 or 32,768 words of magnetic core memory",
                    "storage": "Magnetic tape and magnetic drum",
                    "vacuum_tubes": 4000,
                    "speed": "40,000 operations per second"
                },
                "development": {
                    "location": "IBM",
                    "predecessor": "IBM 701",
                    "total_produced": 123,
                    "rental_cost": "$25,000 per month (approximately $280,000 in 2024 dollars)"
                },
                "applications": [
                    "Scientific and engineering calculations",
                    "Early artificial intelligence research",
                    "FORTRAN programming language development",
                    "Weather forecasting"
                ],
                "legacy": "Enabled the development of FORTRAN and established IBM as the leading computer manufacturer.",
                "interesting_facts": [
                    "First computer to run the FORTRAN programming language",
                    "Used for early AI research including checkers-playing programs",
                    "Magnetic core memory was so reliable it remained standard until the 1970s",
                    "Required a specialized computer room with raised floors for cabling"
                ]
            },
            "apollo": {
                "name": "Apollo Guidance Computer (AGC)",
                "year": 1966,
                "overview": "The first computer to use integrated circuits, the AGC guided astronauts to the Moon and back in one of humanity's greatest achievements.",
                "historical_significance": "Proved that computers could be reliable enough for life-critical missions and drove the development of integrated circuit technology.",
                "technical_details": {
                    "architecture": "15-bit word length with 16-bit addressing",
                    "memory": "4KB ROM (rope core) + 2KB RAM (magnetic core)",
                    "weight_details": "70 pounds (32 kg) - incredibly lightweight for its era",
                    "power_consumption": "55 watts",
                    "integrated_circuits": "First computer to use ICs exclusively (4,100 ICs)"
                },
                "development": {
                    "location": "MIT Instrumentation Laboratory",
                    "lead_engineer": "Charles Stark Draper",
                    "software_engineer": "Margaret Hamilton (coined 'software engineering')",
                    "development_time": "8 years (1961-1969)",
                    "cost": "$3.5 million per unit (approximately $27 million in 2024 dollars)"
                },
                "applications": [
                    "Spacecraft navigation and guidance",
                    "Engine control and throttling",
                    "Landing sequence automation",
                    "Real-time astronaut interface"
                ],
                "legacy": "Drove the integrated circuit industry and established principles for real-time, fault-tolerant computing.",
                "interesting_facts": [
                    "Software was literally 'woven' into rope core memory by hand",
                    "Had priority scheduling - programs could interrupt each other",
                    "Survived multiple computer alarms during Apollo 11 landing",
                    "Margaret Hamilton's software engineering prevented mission failures",
                    "More reliable than many modern systems despite 1960s technology"
                ]
            },
            "voyager": {
                "name": "Voyager Spacecraft Computer",
                "year": 1977,
                "overview": "Twin spacecraft computers that have operated continuously for over 45 years, currently sending data from interstellar space.",
                "historical_significance": "Longest-operating computers in history, demonstrating unprecedented reliability and longevity in the harshest environment possible.",
                "technical_details": {
                    "architecture": "18-bit custom processor",
                    "memory": "4KB RAM total",
                    "storage": "Digital tape recorder system",
                    "radiation_hardening": "Built to survive Jupiter's radiation belts",
                    "power_consumption": "420 watts total for all systems"
                },
                "development": {
                    "location": "NASA Jet Propulsion Laboratory",
                    "mission_duration": "Originally 4 years, now 45+ years and counting",
                    "distance": "Over 15 billion miles from Earth (Voyager 1)",
                    "cost": "$865 million total mission (approximately $4.2 billion in 2024 dollars)"
                },
                "applications": [
                    "Deep space navigation",
                    "Scientific instrument control",
                    "Data collection and transmission",
                    "Autonomous decision making"
                ],
                "legacy": "Set the standard for space-based computing reliability and autonomous operation.",
                "interesting_facts": [
                    "Still communicating with Earth after 45+ years",
                    "First human-made objects to enter interstellar space",
                    "Commands from Earth take over 22 hours to reach Voyager 1",
                    "Computers have been reprogrammed remotely multiple times",
                    "Surviving on power from decaying plutonium generators"
                ]
            },
            "shuttle": {
                "name": "Space Shuttle Primary Flight Computer",
                "year": 1981,
                "overview": "Five redundant computers that controlled every aspect of Space Shuttle operations, from launch to landing.",
                "historical_significance": "First fly-by-wire spacecraft, proving that computers could safely control complex vehicles with human lives aboard.",
                "technical_details": {
                    "architecture": "IBM AP-101 32-bit processor",
                    "memory": "106KB RAM per computer",
                    "redundancy": "5 computers (4 primary + 1 backup)",
                    "weight_details": "64 pounds (29 kg) per computer",
                    "processing_power": "400,000 instructions per second"
                },
                "development": {
                    "location": "IBM Federal Systems Division",
                    "software_lines": "Over 500,000 lines of HAL/S code",
                    "verification": "Exhaustive testing and formal verification methods",
                    "operational_period": "1981-2011 (30 years, 135 missions)"
                },
                "applications": [
                    "Launch sequence control",
                    "Orbital maneuvering",
                    "Landing approach and touchdown",
                    "Life support system management"
                ],
                "legacy": "Established principles for fault-tolerant computing that are still used in aerospace today.",
                "interesting_facts": [
                    "Never experienced a computer-related mission failure",
                    "Could vote out malfunctioning computers automatically",
                    "Computers were upgraded multiple times during shuttle program",
                    "HAL/S programming language was created specifically for real-time aerospace",
                    "Each mission carried backup computers that were never needed"
                ]
            }
        };

        let scaleComparisons = {
            "scale_objects": {
                "microscopic": [
                    {
                        "name": "Red Blood Cell",
                        "size": 0.000007,
                        "unit": "meters",
                        "description": "Human red blood cell diameter"
                    },
                    {
                        "name": "Grain of Sand",
                        "size": 0.0005,
                        "unit": "meters",
                        "description": "Fine beach sand particle"
                    }
                ],
                "small": [
                    {
                        "name": "Pea",
                        "size": 0.005,
                        "unit": "meters",
                        "description": "Garden pea diameter"
                    },
                    {
                        "name": "Marble",
                        "size": 0.016,
                        "unit": "meters",
                        "description": "Standard glass marble"
                    },
                    {
                        "name": "Golf Ball",
                        "size": 0.043,
                        "unit": "meters",
                        "description": "Official golf ball diameter"
                    },
                    {
                        "name": "Tennis Ball",
                        "size": 0.067,
                        "unit": "meters",
                        "description": "Official tennis ball diameter"
                    }
                ],
                "medium": [
                    {
                        "name": "Basketball",
                        "size": 0.24,
                        "unit": "meters",
                        "description": "Official basketball diameter"
                    },
                    {
                        "name": "Beach Ball",
                        "size": 0.61,
                        "unit": "meters",
                        "description": "Large inflatable beach ball"
                    },
                    {
                        "name": "Person",
                        "size": 1.7,
                        "unit": "meters",
                        "description": "Average human height"
                    },
                    {
                        "name": "Car",
                        "size": 4.5,
                        "unit": "meters",
                        "description": "Average sedan length"
                    }
                ],
                "large": [
                    {
                        "name": "House",
                        "size": 12,
                        "unit": "meters",
                        "description": "Two-story house height"
                    },
                    {
                        "name": "Blue Whale",
                        "size": 30,
                        "unit": "meters",
                        "description": "Largest animal on Earth"
                    },
                    {
                        "name": "Football Field",
                        "size": 109,
                        "unit": "meters",
                        "description": "American football field length"
                    },
                    {
                        "name": "Eiffel Tower",
                        "size": 330,
                        "unit": "meters",
                        "description": "Height including antenna"
                    }
                ],
                "massive": [
                    {
                        "name": "Mount Everest",
                        "size": 8849,
                        "unit": "meters",
                        "description": "World's tallest mountain"
                    },
                    {
                        "name": "Manhattan Island",
                        "size": 21000,
                        "unit": "meters",
                        "description": "Length of Manhattan"
                    },
                    {
                        "name": "Earth Diameter",
                        "size": 12742000,
                        "unit": "meters",
                        "description": "Diameter of planet Earth"
                    },
                    {
                        "name": "Moon Diameter",
                        "size": 3474000,
                        "unit": "meters",
                        "description": "Diameter of Earth's moon"
                    }
                ],
                "astronomical": [
                    {
                        "name": "Sun Diameter",
                        "size": 1392000000,
                        "unit": "meters",
                        "description": "Diameter of our Sun"
                    },
                    {
                        "name": "Jupiter Diameter",
                        "size": 142984000,
                        "unit": "meters",
                        "description": "Largest planet in our solar system"
                    },
                    {
                        "name": "Solar System",
                        "size": 287460000000000,
                        "unit": "meters",
                        "description": "Diameter including Kuiper Belt"
                    }
                ]
            },
            "visualization_rules": {
                "ratio_1_to_10": {
                    "method": "proportional_circles",
                    "objects": ["small"],
                    "description": "Use proportional circles with small everyday objects"
                },
                "ratio_10_to_100": {
                    "method": "size_comparison",
                    "objects": ["small", "medium"],
                    "description": "Compare small objects to medium objects"
                },
                "ratio_100_to_1000": {
                    "method": "size_comparison",
                    "objects": ["medium", "large"],
                    "description": "Compare medium objects to large objects"
                },
                "ratio_1000_to_10000": {
                    "method": "metaphor_comparison",
                    "objects": ["large", "massive"],
                    "description": "Use metaphorical comparisons with large to massive objects"
                },
                "ratio_10000_to_1000000": {
                    "method": "metaphor_comparison",
                    "objects": ["massive", "astronomical"],
                    "description": "Use planetary and astronomical scale metaphors"
                },
                "ratio_above_1000000": {
                    "method": "abstract_visualization",
                    "objects": ["astronomical"],
                    "description": "Use abstract representations and acknowledge scale limitations"
                }
            },
            "metaphor_templates": {
                "size_difference": "If {object1} were scaled to the size of a {scale_object1}, then {object2} would be the size of a {scale_object2}",
                "count_metaphor": "If {object1} were a {unit_object}, you would need {count} of them to equal one {object2}",
                "distance_metaphor": "The difference is like comparing {small_distance} to {large_distance}",
                "time_metaphor": "Like comparing {short_time} to {long_time}"
            }
        };

        // No longer need to load reference data asynchronously
        function loadReferenceData() {
            // Data is now embedded above
            return Promise.resolve();
        }

        // Create reference panel for a computer
        function createReferencePanel(computerId, computerName) {
            if (!referenceData[computerId]) return '';

            const ref = referenceData[computerId];
            
            return `
                <div class="reference-panel">
                    <div class="reference-header" onclick="toggleReference('${computerId}')">
                        <span>📚 Learn More About ${computerName}</span>
                        <span class="reference-toggle" id="toggle-${computerId}">▼</span>
                    </div>
                    <div class="reference-content" id="content-${computerId}">
                        <div class="reference-section">
                            <h4>Overview</h4>
                            <p>${ref.overview}</p>
                        </div>
                        
                        <div class="reference-section">
                            <h4>Historical Significance</h4>
                            <p>${ref.historical_significance}</p>
                        </div>
                        
                        ${ref.technical_details ? `
                        <div class="reference-section">
                            <h4>Technical Details</h4>
                            ${Object.entries(ref.technical_details).map(([key, value]) => 
                                `<div class="spec-row">
                                    <span class="spec-label">${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}:</span>
                                    <span class="spec-value">${value}</span>
                                </div>`
                            ).join('')}
                        </div>
                        ` : ''}
                        
                        ${ref.development ? `
                        <div class="reference-section">
                            <h4>Development</h4>
                            ${Object.entries(ref.development).map(([key, value]) => 
                                `<div class="spec-row">
                                    <span class="spec-label">${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}:</span>
                                    <span class="spec-value">${value}</span>
                                </div>`
                            ).join('')}
                        </div>
                        ` : ''}
                        
                        ${ref.interesting_facts ? `
                        <div class="reference-facts">
                            <h4>💡 Interesting Facts</h4>
                            <ul>
                                ${ref.interesting_facts.map(fact => `<li>${fact}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                        
                        <div class="reference-section">
                            <h4>Legacy</h4>
                            <p>${ref.legacy}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Toggle reference panel
        function toggleReference(computerId) {
            const content = document.getElementById(`content-${computerId}`);
            const toggle = document.getElementById(`toggle-${computerId}`);
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                toggle.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
                toggle.classList.add('expanded');
            }
        }

        // Enhanced scale visualization
        function createScaleMetaphor(ratio, name1, name2) {
            if (!scaleComparisons.scale_objects || ratio < 10) return '';

            let scaleObj1, scaleObj2;
            
            // Determine appropriate scale objects based on ratio
            if (ratio < 100) {
                scaleObj1 = scaleComparisons.scale_objects.small[Math.floor(Math.random() * scaleComparisons.scale_objects.small.length)];
                scaleObj2 = scaleComparisons.scale_objects.medium[Math.floor(Math.random() * scaleComparisons.scale_objects.medium.length)];
            } else if (ratio < 1000) {
                scaleObj1 = scaleComparisons.scale_objects.medium[Math.floor(Math.random() * scaleComparisons.scale_objects.medium.length)];
                scaleObj2 = scaleComparisons.scale_objects.large[Math.floor(Math.random() * scaleComparisons.scale_objects.large.length)];
            } else if (ratio < 10000) {
                scaleObj1 = scaleComparisons.scale_objects.large[Math.floor(Math.random() * scaleComparisons.scale_objects.large.length)];
                scaleObj2 = scaleComparisons.scale_objects.massive[Math.floor(Math.random() * scaleComparisons.scale_objects.massive.length)];
            } else {
                scaleObj1 = scaleComparisons.scale_objects.massive[Math.floor(Math.random() * scaleComparisons.scale_objects.massive.length)];
                scaleObj2 = scaleComparisons.scale_objects.astronomical[Math.floor(Math.random() * scaleComparisons.scale_objects.astronomical.length)];
            }

            const size1 = Math.min(40, 20 + (60 / ratio));
            const size2 = Math.min(100, size1 * Math.min(ratio, 5));

            return `
                <div class="scale-metaphor">
                    <div class="scale-metaphor-title">🌍 Real-World Scale Comparison</div>
                    <div class="scale-objects">
                        <div class="scale-object">
                            <div class="scale-object-visual scale-object-1" style="width: ${size1}px; height: ${size1}px;">
                                ${scaleObj1.name === 'Tennis Ball' ? '🎾' : 
                                  scaleObj1.name === 'Basketball' ? '🏀' : 
                                  scaleObj1.name === 'Car' ? '🚗' : 
                                  scaleObj1.name === 'House' ? '🏠' : 
                                  scaleObj1.name === 'Earth Diameter' ? '🌍' : '●'}
                            </div>
                            <div class="scale-object-name">${scaleObj1.name}</div>
                            <div style="font-size: 0.8em; color: #7f8c8d;">(${name1})</div>
                        </div>
                        
                        <div style="font-size: 2em; color: #e67e22; align-self: center;">VS</div>
                        
                        <div class="scale-object">
                            <div class="scale-object-visual scale-object-2" style="width: ${size2}px; height: ${size2}px;">
                                ${scaleObj2.name === 'Blue Whale' ? '🐋' : 
                                  scaleObj2.name === 'Eiffel Tower' ? '🗼' : 
                                  scaleObj2.name === 'Mount Everest' ? '🏔️' : 
                                  scaleObj2.name === 'Earth Diameter' ? '🌍' : 
                                  scaleObj2.name === 'Moon Diameter' ? '🌙' : 
                                  scaleObj2.name === 'Sun Diameter' ? '☀️' : '●'}
                            </div>
                            <div class="scale-object-name">${scaleObj2.name}</div>
                            <div style="font-size: 0.8em; color: #7f8c8d;">(${name2})</div>
                        </div>
                    </div>
                    <div class="scale-explanation">
                        If ${name1} were the size of a ${scaleObj1.name}, then ${name2} would be like a ${scaleObj2.name} - that's a ${ratio.toFixed(1)}× difference!
                    </div>
                </div>
            `;
        }

        // Timeline data and functions
        const timelineMilestones = [
            { year: 1946, id: 'eniac', name: 'ENIAC', description: 'First electronic computer', type: 'milestone' },
            { year: 1951, id: 'univac1', name: 'UNIVAC I', description: 'First commercial computer', type: 'context' },
            { year: 1954, id: 'ibm704', name: 'IBM 704', description: 'First mass-produced computer', type: 'context' },
            { year: 1966, id: 'apollo', name: 'Apollo Computer', description: 'First integrated circuits', type: 'milestone' },
            { year: 1971, id: 'intel4004', name: 'Intel 4004', description: 'First microprocessor', type: 'milestone' },
            { year: 1975, id: 'altair8800', name: 'Altair 8800', description: 'First personal computer', type: 'context' },
            { year: 1977, id: 'apple2', name: 'Apple II', description: 'Mass-market personal computer', type: 'context' },
            { year: 1981, id: 'ibmpc', name: 'IBM PC', description: 'PC standard established', type: 'milestone' },
            { year: 1984, id: 'mac128k', name: 'Mac 128K', description: 'GUI revolution', type: 'context' },
            { year: 1993, id: 'pentium', name: 'Intel Pentium', description: 'Superscalar architecture', type: 'milestone' },
            { year: 2007, id: 'iphone1', name: 'iPhone', description: 'Mobile computing era', type: 'milestone' },
            { year: 2010, id: 'ipad1', name: 'iPad', description: 'Tablet computing', type: 'context' },
            { year: 2020, id: 'm1', name: 'Apple M1', description: 'ARM desktop revolution', type: 'milestone' },
            { year: 2024, id: 'm4', name: 'Apple M4', description: 'Latest silicon', type: 'context' }
        ];

        function createTimeline(comp1Id, comp2Id) {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '<div class="timeline-line"></div>';

            // Get comparison computers
            const comp1 = computers[comp1Id];
            const comp2 = computers[comp2Id];
            
            // Create a combined list of milestones + compared computers
            let timelineItems = [...timelineMilestones];
            
            // Add compared computers if they're not already in milestones
            if (comp1 && !timelineItems.find(item => item.id === comp1Id)) {
                timelineItems.push({
                    year: comp1.year,
                    id: comp1Id,
                    name: comp1.name.split(' (')[0],
                    description: comp1.category,
                    type: 'comparison'
                });
            }
            
            if (comp2 && !timelineItems.find(item => item.id === comp2Id)) {
                timelineItems.push({
                    year: comp2.year,
                    id: comp2Id,
                    name: comp2.name.split(' (')[0],
                    description: comp2.category,
                    type: 'comparison'
                });
            }

            // Sort by year and take a reasonable subset
            timelineItems.sort((a, b) => a.year - b.year);
            
            // Keep only key milestones plus the comparison computers
            let selectedItems = timelineItems.filter(item => 
                item.type === 'milestone' || 
                item.type === 'comparison' ||
                (item.type === 'context' && Math.random() < 0.3) // Randomly include some context
            );

            // Ensure we don't have too many items (max 8-10 for readability)
            if (selectedItems.length > 10) {
                selectedItems = selectedItems.filter(item => 
                    item.type === 'milestone' || item.type === 'comparison'
                );
            }

            selectedItems.forEach(item => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                
                let dotClass = 'timeline-dot';
                let nameClass = 'timeline-computer';
                
                if (item.id === comp1Id || item.id === comp2Id) {
                    dotClass += ' comparison';
                    nameClass += ' comparison';
                } else if (item.type === 'milestone') {
                    dotClass += ' highlighted';
                    nameClass += ' highlighted';
                }

                timelineItem.innerHTML = `
                    <div class="${dotClass}"></div>
                    <div class="timeline-content">
                        <div class="timeline-year">${item.year}</div>
                        <div class="${nameClass}">${item.name}</div>
                        <div class="timeline-description">${item.description}</div>
                    </div>
                `;
                
                timeline.appendChild(timelineItem);
            });
        }

        // Initialize
        loadReferenceData().then(() => {
            populateDropdowns();
        });

        // Event listeners with custom build detection
        document.getElementById('computer1').addEventListener('change', function(e) {
            if (e.target.value === 'custom_build_1') {
                e.target.value = ''; // Reset selection
                openCustomBuild(1);
            } else {
                displayComparison();
            }
        });

        document.getElementById('computer2').addEventListener('change', function(e) {
            if (e.target.value === 'custom_build_2') {
                e.target.value = ''; // Reset selection
                openCustomBuild(2);
            } else {
                displayComparison();
            }
        });
    </script>
</body>
</html>